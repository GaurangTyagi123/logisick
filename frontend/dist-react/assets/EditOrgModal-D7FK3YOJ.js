import{a as C,y as m,j as e}from"./index-wf-tjCCz.js";import{M as N}from"./Modal-iqcfqeyR.js";import{C as v,a as b,d as w,b as S,c as O}from"./card-D-GtwW-r.js";import{u as P,B as d}from"./button-EG1lfJG5.js";import{C as q}from"./Close-CF-osNUi.js";import{u as z,C as F}from"./index.esm-DfvpWMFY.js";import{L as i}from"./label-ByPLIqZS.js";import{I as c}from"./input-DktSRuev.js";import{S as L,a as D,b as M,c as B,d as E}from"./Select-DI_u4WjR.js";import{u as T}from"./apiOrg-UDa7ZxcE.js";import"./separator-CrRW6nuX.js";import"./index-BH-lDzbn.js";import"./Pagination-Dr5pjMs8.js";const Q=["Basic","Small-Cap","Mid-Cap","Large-Cap","Other"];function Z({open:u,setOpen:n}){const r=C(),t=r.getQueryData(["user"])?.user.myOrg,{register:o,formState:p,handleSubmit:x,control:g}=z({defaultValues:t}),{errors:a}=p,{mutate:f,isPending:h}=P({mutationFn:T,onSuccess:()=>{r.invalidateQueries({queryKey:["user"]}),r.invalidateQueries({queryKey:["orgs"]}),m.success("Organization updated successfully",{className:"toast"})},onError:s=>{m.error(s.message,{className:"toast"})}}),j=s=>{t&&f({id:t?._id,data:s}),n(!1)};return e.jsx(N,{openModal:u,children:e.jsxs(v,{className:"w-md max-w-11/12",children:[e.jsxs(b,{className:"flex justify-between items-center",children:[e.jsx(w,{children:"Create Organization"}),e.jsx(d,{onClick:()=>n(!1),variant:"secondary",children:e.jsx(q,{})})]}),e.jsx(S,{className:"grid gap-2",children:e.jsxs("form",{children:[e.jsxs(i,{title:"Previous Password field is required",htmlFor:"name",className:"grid gap-4 my-3",children:["Organization's Name",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(c,{placeholder:"Enter Your Organization's Name",type:"text",id:"name",className:"text-sm md:text-md",...o("name",{required:"Please provide a name",minLength:{value:1,message:"Name is too short"},maxLength:{value:48,message:"Name is too long"}})})}),a?.name&&e.jsx("span",{className:"text-xs text-red-500",children:a?.name?.message})]}),e.jsxs(i,{title:"Previous Password field is required",htmlFor:"Description",className:"grid gap-4",children:["Organization's Description",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(c,{placeholder:"Enter a brief description ",type:"text",id:"Description",className:"text-sm md:text-md",...o("description",{required:"Please provide a description of your organization",minLength:{value:8,message:"Description is too short"},maxLength:{value:300,message:"Description is too long"}})})}),a?.description&&e.jsx("span",{className:"text-xs text-red-500",children:a?.description?.message})]}),e.jsxs(i,{title:"Previous Password field is required",htmlFor:"Type",className:"grid gap-4 mt-3",children:["Type",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(F,{name:"type",control:g,render:({field:s})=>e.jsxs(L,{onValueChange:s.onChange,value:s.value,children:[e.jsx(D,{className:"w-full",children:e.jsx(M,{placeholder:"Basic",defaultValue:"Basic"})}),e.jsx(B,{children:Q.map((l,y)=>e.jsx(E,{value:l,children:l},y))})]})})})]})]})}),e.jsx(O,{children:e.jsx(d,{className:"w-full",type:"submit",onClick:x(j),disabled:h,children:"Submit"})})]})})}export{Z as default};
