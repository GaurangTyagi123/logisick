import{a as h,b as y,r as N,j as e,y as s}from"./index-BTqsFGzI.js";import{C as j}from"./Close-gHDstr_r.js";import{M as C}from"./Modal-BLI6cZw-.js";import{B as o}from"./button-Bi1CbZ-Y.js";import{C as O,a as q,d as b,b as w,c as v}from"./card-D9cROTRP.js";import{I as d}from"./input-DmIDtVMO.js";import{L as m}from"./label-C4ZKI0uH.js";import{g as I}from"./apiOrg-CsUkuOvK.js";import"./Typography-SW8h9KUc.js";import"./separator-DGwrj2LX.js";function L({open:c,setOpen:i,orderdata:a,createOrderFn:x,isCreatingOrder:p}){const{orgSlug:l}=h(),{data:u,isPending:f}=y({queryKey:[`org-${l}`],queryFn:()=>I(l)}),[r,n]=N.useState({orderName:"",quantity:1,orderedOn:new Date}),g=()=>{if(r.quantity<0||r.quantity>a.itemAmount)return s.error("Order quantity can't be out of item's amount range",{className:"toast"});if(r.orderedOn>new Date)return s.error("Can't place order in future",{className:"toast"});if(u?._id.trim()==="")return s.error("Organization can't be identified",{className:"toast"});if(a.itemId.trim()==="")return s.error("Item can't be identified",{className:"toast"});x({...r,organizationId:u?._id,itemId:a.itemId}),n({orderedOn:new Date,quantity:1,orderName:""}),i(!1)};return e.jsx(C,{openModal:c,children:e.jsxs(O,{className:"w-md max-w-11/12",children:[e.jsxs(q,{className:"flex justify-between items-center",children:[e.jsxs(b,{children:["Create new order for ",a.itemName]}),e.jsx(o,{onClick:()=>i(!1),variant:"secondary",children:e.jsx(j,{})})]}),e.jsxs(w,{className:"grid gap-2 max-h-80 overflow-auto sm:px-1",children:[e.jsxs(m,{htmlFor:"orderName",className:"grid",children:[e.jsx("span",{children:"Order Name *"}),e.jsx(d,{id:"orderName",name:"orderName",type:"text",value:r.orderName,className:"text-sm md:text-md",min:1,onChange:t=>n({...r,orderName:t.target.value}),placeholder:"Enter order Name",required:!0})]}),e.jsxs(m,{htmlFor:"quantity",className:"grid",children:[e.jsx("span",{children:"Quantity *"}),e.jsx(d,{id:"quantity",name:"quantity",type:"number",onFocus:t=>t.target.select(),value:r.quantity,className:"text-sm md:text-md",min:1,max:a.itemAmount,onChange:t=>n({...r,quantity:Number(t.target.value)}),placeholder:"Enter item quantity",required:!0})]}),e.jsxs(m,{htmlFor:"Ordered On",className:"grid",children:[e.jsx("span",{children:"Ordered On *"}),e.jsx(d,{id:"orderedon",name:"orderedOn",type:"date",value:r.orderedOn.toISOString().split("T")[0],max:r.orderedOn.toISOString().split("T")[0],onChange:t=>{n({...r,orderedOn:new Date(t.target.valueAsDate||r.orderedOn)})},placeholder:"Enter item's order date",className:"w-full text-sm md:text-md",required:!0})]})]}),e.jsxs(v,{className:"flex gap-2",children:[e.jsx(o,{type:"button",onClick:()=>i(!1),variant:"secondary",children:"Cancel"}),e.jsx(o,{type:"button",onClick:g,disabled:p||f,children:"Create Order"})]})]})})}export{L as default};
