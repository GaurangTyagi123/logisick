import{a as u,u as l,y as i,c as d,g as m,r as g,j as s,i as p}from"./index-DGdq0UJg.js";import{B as f}from"./BigHeading-eI9geLCr.js";import{u as v,B as x,a as h}from"./button-BJYD--B9.js";import{b as I}from"./apiEmp-C0LgsLVI.js";function j(){const a=u(),n=l(),{mutate:c,isPending:t}=v({mutationFn:({token:e})=>I(e),onSuccess:e=>{a.invalidateQueries({predicate:r=>r.queryKey[0]?.toString()==="emps"}),i.success("Invite Accepted",{className:"toast"}),n("/dashboard")},onError:e=>{i.error(e.message,{className:"toast"})}});return{acceptInvitation:c,isAcceptingInvite:t}}function y(){const{token:a}=d(),{acceptInvitation:n,isAcceptingInvite:c}=j(),{user:t,isCheckingAuth:e}=m(),r=()=>{a?n({token:a}):i.error("No invitation token found",{className:"toast"})};return g.useEffect(()=>{let o;return t||(o=i.error("Login/Register first to accept invitatation",{className:"toast"})),()=>i.dismiss(o)},[t]),e?s.jsx(p,{fullscreen:!0}):s.jsxs("div",{className:"h-dvh bg-ls-bg-300 dark:bg-ls-bg-dark-800 flex flex-col justify-center items-center",children:[s.jsx(f,{center:!0}),s.jsx("div",{className:"max-w-lg p-2 grid",children:t?s.jsx(x,{disabled:c||!t,onClick:r,children:"Accept Invitation"}):s.jsx(h,{children:"Login/Register first to accept invitatation"})})]})}export{y as default};
