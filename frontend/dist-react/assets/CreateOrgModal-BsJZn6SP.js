import{a as y,y as l,j as e}from"./index-DGdq0UJg.js";import{M as N}from"./Modal-DKjyBxId.js";import{C as v,a as w,d as b,b as S,c as P}from"./card-DED02hlv.js";import{u as q,B as m}from"./button-BJYD--B9.js";import{C as O}from"./Close-B_kHsTBg.js";import{u as z,C as F}from"./index.esm-CNTmTiql.js";import{L as r}from"./label-DsFwhH02.js";import{I as c}from"./input-BQR0Vhqq.js";import{S as L,a as M,b as B,c as D,d as T}from"./Select-DfBsLxB1.js";import{c as E}from"./apiOrg-Cb9F5o2f.js";import"./separator-DZ5S64f-.js";import"./index-CigmW9Sa.js";import"./Pagination-Bim9olB9.js";const I=["Basic","Small-Cap","Mid-Cap","Large-Cap","Other"];function Z({open:d,setOpen:t}){const{register:i,handleSubmit:u,formState:p,control:x,reset:g}=z(),{errors:a}=p,n=y(),{mutate:h,isPending:f}=q({mutationFn:E,onSuccess:()=>{n.invalidateQueries({queryKey:["orgs"]}),n.invalidateQueries({queryKey:["user"]}),l.success("Organization created successfully",{className:"toast"})},onError:s=>{l.error(s.message,{className:"toast"})},onSettled:()=>{g()}}),j=s=>{h(s),t(!1)};return e.jsx(N,{openModal:d,children:e.jsxs(v,{className:"w-md max-w-11/12",children:[e.jsxs(w,{className:"flex justify-between items-center",children:[e.jsx(b,{children:"Create Organization"}),e.jsx(m,{onClick:()=>t(!1),variant:"secondary",children:e.jsx(O,{})})]}),e.jsx(S,{className:"grid gap-2",children:e.jsxs("form",{children:[e.jsxs(r,{title:"Previous Password field is required",htmlFor:"name",className:"grid gap-4 my-3",children:["Organization's Name",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(c,{placeholder:"Enter Your Organization's Name",type:"text",id:"name",className:"text-sm md:text-md",...i("name",{required:"Please provide a name",minLength:{value:1,message:"Name is too short"},maxLength:{value:48,message:"Name is too long"}})})}),a?.name&&e.jsx("span",{className:"text-xs text-red-500",children:a?.name?.message})]}),e.jsxs(r,{title:"Previous Password field is required",htmlFor:"Description",className:"grid gap-4",children:["Organization's Description",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(c,{placeholder:"Enter a brief description ",type:"text",id:"Description",className:"text-sm md:text-md",...i("description",{required:"Please provide a description of your organization",minLength:{value:8,message:"Description is too short"},maxLength:{value:300,message:"Description is too long"}})})}),a?.description&&e.jsx("span",{className:"text-xs text-red-500",children:a?.description?.message})]}),e.jsxs(r,{title:"Previous Password field is required",htmlFor:"Type",className:"grid gap-4 mt-3 w-full",children:["Type",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(F,{name:"type",control:x,render:({field:s})=>e.jsxs(L,{onValueChange:s.onChange,value:s.value,children:[e.jsx(M,{className:"w-full",children:e.jsx(B,{placeholder:"Basic",defaultValue:"Basic"})}),e.jsx(D,{children:I.map((o,C)=>e.jsx(T,{value:o,children:o},C))})]})})})]})]})}),e.jsx(P,{children:e.jsx(m,{className:"w-full",type:"submit",onClick:u(j),disabled:f,children:"Submit"})})]})})}export{Z as default};
