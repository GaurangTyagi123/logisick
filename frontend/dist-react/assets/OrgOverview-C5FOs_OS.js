import{r as a,j as e,y as R,c as A,b as G,L as I}from"./index-DGdq0UJg.js";import{u as M}from"./useGetEmployees-BviN6gmo.js";import{u as O,a as j,S as b,M as B,B as T}from"./button-BJYD--B9.js";import{s as z,g as Z}from"./apiOrg-Cb9F5o2f.js";import{U as F}from"./UserAvatar-8Gg3wf1Y.js";import{l as L,C as E,a as U}from"./CustomTableSkeleton-BiPxJ0xx.js";import{B as w}from"./badge-D5jlqsIW.js";import{f as N}from"./utilfn-VpFqLrdN.js";import{S as i}from"./skeleton-CuA9NrK2.js";import"./card-DED02hlv.js";import"./input-BQR0Vhqq.js";import"./separator-DZ5S64f-.js";import"./Pagination-Bim9olB9.js";function y(t){return t?.map(s=>({role:s?.data?.role,...s?.data?.employees}))||[]}function _({orgid:t}){const[c,S]=a.useState(1),[u,v]=a.useState(1),{data:k,count:m,isGettingEmployees:d,error:p}=M(t,u),[x,f]=a.useState(null),{mutate:h}=O({mutationFn:z,onSettled:r=>{if(r)f(y(r.employees.map(l=>({data:l}))));else return}}),n=a.useRef(null),g=a.useCallback(async r=>{n.current&&n.current.abort();const l=new AbortController;n.current=l,r.length&&h({orgid:t,query:r.trim(),controller:l})},[t,h]),o=a.useMemo(()=>L.debounce(g,500),[g]),C=a.useCallback(r=>{if(r.trim()===""){o.cancel(),f(null),n.current&&n.current.abort();return}o(r)},[o]);if(a.useEffect(()=>{d||S(m>5?Math.ceil(m/5):1)},[m,d]),a.useEffect(()=>()=>{o.cancel(),n.current?.abort()},[o]),d)return e.jsx(E,{});if(p){R.error(p.message,{className:"toast"});return}const P=y(k);return e.jsx(U,{title:"Employees",columns:[{key:"name",header:"Name",render:(r,l)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(F,{className:"w-10 h-10",customSeed:l.avatar}),e.jsx("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:l?.name})]})},{key:"email",header:"Email"},{key:"role",header:"Role"}],clientSide:!0,data:x||P,currentPage:u,totalPages:c,setPage:v,onSearch:C})}function re(){const{orgSlug:t}=A(),{data:s,isPending:c}=G({queryKey:[`org-${t}`],queryFn:()=>Z(t)});return c?e.jsxs("div",{className:"flex flex-col gap-2  items-baseline h-full w-autorounded-2xl bg-ls-bg-300 dark:bg-ls-bg-dark-800",children:[e.jsxs("div",{className:"bg-white dark:bg-ls-bg-dark-800 outline-1 w-full p-3 rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center w-full",children:[e.jsx(i,{className:"w-1/3 h-10"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{className:"h-18 w-18"}),e.jsx(i,{className:"h-18 w-18"})]})]}),e.jsx(i,{className:"w-1/2 h-5"})]}),e.jsx(E,{})]}):s?e.jsxs("div",{className:"grid gap-2 jet-brains rounded-2xl bg-ls-bg-300 dark:bg-ls-bg-dark-800",children:[e.jsxs("div",{className:"bg-white dark:bg-ls-bg-dark-800 outline-1 w-full p-3 rounded-lg md:rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center w-full",children:[e.jsx(j,{className:"overflow-hidden text-ellipsis whitespace-nowrap w-full text-center md:text-start",children:s.name}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(b,{className:"grid place-items-center gap-2 h-full p-2",children:["Imports",e.jsx(w,{className:"p-2",children:N(5e5,"INR")})]}),e.jsxs(b,{className:"grid place-items-center gap-2 h-full p-2",children:["Exports",e.jsx(w,{className:"p-2",children:N(5e5,"INR")})]})]})]}),e.jsx(B,{className:"line-clamp-2 md:text-start text-center",children:s.description})]}),s?e.jsx(_,{orgid:s?._id}):e.jsxs("div",{className:"h-96 w-full flex flex-col justify-center items-center gap-3 outline-1",children:[e.jsx(j,{children:"Your Organization doesn't have any employees"}),e.jsx(T,{asChild:!0,children:e.jsx(I,{to:"user-role",children:"Add Employees"})})]})]}):e.jsx("p",{children:"Create your own organiztion"})}export{re as default};
