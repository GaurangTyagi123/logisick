import{r as n,j as u,u as Oe,y as De}from"./index-DLpN21qu.js";import{M as Ae}from"./Modal-DwasNNXn.js";import{C as Be,a as We,b as Ie,c as Ne,d as Fe}from"./card-CgDFFM5A.js";import{c as J,B as ve,S as _e}from"./button-DdnwTV88.js";import{C as He}from"./Close-CSLTv9Z2.js";import{u as Le}from"./Profile-CQgqDbIj.js";import"./Profilepage-dLER-cBz.js";import"./Navbar-rbu8Ocl0.js";import"./UserAvatar-Cr1zkuZg.js";import"./dropdown-menu-Bvxii03f.js";import"./table-598c6dIx.js";import"./badge-CUW8UCuf.js";import"./useGetOrganizations-CJ50NmT0.js";import"./apiOrg-BfKVskqD.js";var $e=Object.defineProperty,Ge=Object.defineProperties,ze=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,he=(e,r,a)=>r in e?$e(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,Ve=(e,r)=>{for(var a in r||(r={}))ge.call(r,a)&&he(e,a,r[a]);if(U)for(var a of U(r))be.call(r,a)&&he(e,a,r[a]);return e},qe=(e,r)=>Ge(e,ze(r)),Ke=(e,r)=>{var a={};for(var i in e)ge.call(e,i)&&r.indexOf(i)<0&&(a[i]=e[i]);if(e!=null&&U)for(var i of U(e))r.indexOf(i)<0&&be.call(e,i)&&(a[i]=e[i]);return a};function Qe(e){let r=setTimeout(e,0),a=setTimeout(e,10),i=setTimeout(e,50);return[r,a,i]}function Ze(e){let r=n.useRef();return n.useEffect(()=>{r.current=e}),r.current}var Je=18,xe=40,Ue=`${xe}px`,Xe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Ye({containerRef:e,inputRef:r,pushPasswordManagerStrategy:a,isFocused:i}){let[b,c]=n.useState(!1),[C,E]=n.useState(!1),[S,_]=n.useState(!1),H=n.useMemo(()=>a==="none"?!1:(a==="increase-width"||a==="experimental-no-flickering")&&b&&C,[b,C,a]),W=n.useCallback(()=>{let v=e.current,M=r.current;if(!v||!M||S||a==="none")return;let x=v,j=x.getBoundingClientRect().left+x.offsetWidth,I=x.getBoundingClientRect().top+x.offsetHeight/2,s=j-Je,L=I;document.querySelectorAll(Xe).length===0&&document.elementFromPoint(s,L)===v||(c(!0),_(!0))},[e,r,S,a]);return n.useEffect(()=>{let v=e.current;if(!v||a==="none")return;function M(){let j=window.innerWidth-v.getBoundingClientRect().right;E(j>=xe)}M();let x=setInterval(M,1e3);return()=>{clearInterval(x)}},[e,a]),n.useEffect(()=>{let v=i||document.activeElement===r.current;if(a==="none"||!v)return;let M=setTimeout(W,0),x=setTimeout(W,2e3),j=setTimeout(W,5e3),I=setTimeout(()=>{_(!0)},6e3);return()=>{clearTimeout(M),clearTimeout(x),clearTimeout(j),clearTimeout(I)}},[r,i,a,W]),{hasPWMBadge:b,willPushPWMBadge:H,PWM_BADGE_SPACE_WIDTH:Ue}}var we=n.createContext({}),ye=n.forwardRef((e,r)=>{var a=e,{value:i,onChange:b,maxLength:c,textAlign:C="left",pattern:E,placeholder:S,inputMode:_="numeric",onComplete:H,pushPasswordManagerStrategy:W="increase-width",pasteTransformer:v,containerClassName:M,noScriptCSSFallback:x=et,render:j,children:I}=a,s=Ke(a,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),L,re,ae,le,oe;let[Ce,Ee]=n.useState(typeof s.defaultValue=="string"?s.defaultValue:""),d=i??Ce,R=Ze(d),$=n.useCallback(t=>{b?.(t),Ee(t)},[b]),y=n.useMemo(()=>E?typeof E=="string"?new RegExp(E):E:null,[E]),p=n.useRef(null),X=n.useRef(null),Y=n.useRef({value:d,onChange:$,isIOS:typeof window<"u"&&((re=(L=window?.CSS)==null?void 0:L.supports)==null?void 0:re.call(L,"-webkit-touch-callout","none"))}),K=n.useRef({prev:[(ae=p.current)==null?void 0:ae.selectionStart,(le=p.current)==null?void 0:le.selectionEnd,(oe=p.current)==null?void 0:oe.selectionDirection]});n.useImperativeHandle(r,()=>p.current,[]),n.useEffect(()=>{let t=p.current,l=X.current;if(!t||!l)return;Y.current.value!==t.value&&Y.current.onChange(t.value),K.current.prev=[t.selectionStart,t.selectionEnd,t.selectionDirection];function m(){if(document.activeElement!==t){z(null),V(null);return}let o=t.selectionStart,f=t.selectionEnd,Q=t.selectionDirection,w=t.maxLength,D=t.value,P=K.current.prev,k=-1,T=-1,A;if(D.length!==0&&o!==null&&f!==null){let ke=o===f,Te=o===D.length&&D.length<w;if(ke&&!Te){let B=o;if(B===0)k=0,T=1,A="forward";else if(B===w)k=B-1,T=B,A="backward";else if(w>1&&D.length>1){let ne=0;if(P[0]!==null&&P[1]!==null){A=B<P[1]?"backward":"forward";let Re=P[0]===P[1]&&P[0]<w;A==="backward"&&!Re&&(ne=-1)}k=ne+B,T=ne+B+1}}k!==-1&&T!==-1&&k!==T&&p.current.setSelectionRange(k,T,A)}let me=k!==-1?k:o,fe=T!==-1?T:f,Me=A??Q;z(me),V(fe),K.current.prev=[me,fe,Me]}if(document.addEventListener("selectionchange",m,{capture:!0}),m(),document.activeElement===t&&ee(!0),!document.getElementById("input-otp-style")){let o=document.createElement("style");if(o.id="input-otp-style",document.head.appendChild(o),o.sheet){let f="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";q(o.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),q(o.sheet,`[data-input-otp]:autofill { ${f} }`),q(o.sheet,`[data-input-otp]:-webkit-autofill { ${f} }`),q(o.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),q(o.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let h=()=>{l&&l.style.setProperty("--root-height",`${t.clientHeight}px`)};h();let g=new ResizeObserver(h);return g.observe(t),()=>{document.removeEventListener("selectionchange",m,{capture:!0}),g.disconnect()}},[]);let[ie,se]=n.useState(!1),[G,ee]=n.useState(!1),[O,z]=n.useState(null),[N,V]=n.useState(null);n.useEffect(()=>{Qe(()=>{var t,l,m,h;(t=p.current)==null||t.dispatchEvent(new Event("input"));let g=(l=p.current)==null?void 0:l.selectionStart,o=(m=p.current)==null?void 0:m.selectionEnd,f=(h=p.current)==null?void 0:h.selectionDirection;g!==null&&o!==null&&(z(g),V(o),K.current.prev=[g,o,f])})},[d,G]),n.useEffect(()=>{R!==void 0&&d!==R&&R.length<c&&d.length===c&&H?.(d)},[c,H,R,d]);let F=Ye({containerRef:X,inputRef:p,pushPasswordManagerStrategy:W,isFocused:G}),ue=n.useCallback(t=>{let l=t.currentTarget.value.slice(0,c);if(l.length>0&&y&&!y.test(l)){t.preventDefault();return}typeof R=="string"&&l.length<R.length&&document.dispatchEvent(new Event("selectionchange")),$(l)},[c,$,R,y]),ce=n.useCallback(()=>{var t;if(p.current){let l=Math.min(p.current.value.length,c-1),m=p.current.value.length;(t=p.current)==null||t.setSelectionRange(l,m),z(l),V(m)}ee(!0)},[c]),de=n.useCallback(t=>{var l,m;let h=p.current;if(!v&&(!Y.current.isIOS||!t.clipboardData||!h))return;let g=t.clipboardData.getData("text/plain"),o=v?v(g):g;t.preventDefault();let f=(l=p.current)==null?void 0:l.selectionStart,Q=(m=p.current)==null?void 0:m.selectionEnd,w=(f!==Q?d.slice(0,f)+o+d.slice(Q):d.slice(0,f)+o+d.slice(f)).slice(0,c);if(w.length>0&&y&&!y.test(w))return;h.value=w,$(w);let D=Math.min(w.length,c-1),P=w.length;h.setSelectionRange(D,P),z(D),V(P)},[c,$,y,d]),Se=n.useMemo(()=>({position:"relative",cursor:s.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[s.disabled]),pe=n.useMemo(()=>({position:"absolute",inset:0,width:F.willPushPWMBadge?`calc(100% + ${F.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:F.willPushPWMBadge?`inset(0 ${F.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:C,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[F.PWM_BADGE_SPACE_WIDTH,F.willPushPWMBadge,C]),je=n.useMemo(()=>n.createElement("input",qe(Ve({autoComplete:s.autoComplete||"one-time-code"},s),{"data-input-otp":!0,"data-input-otp-placeholder-shown":d.length===0||void 0,"data-input-otp-mss":O,"data-input-otp-mse":N,inputMode:_,pattern:y?.source,"aria-placeholder":S,style:pe,maxLength:c,value:d,ref:p,onPaste:t=>{var l;de(t),(l=s.onPaste)==null||l.call(s,t)},onChange:ue,onMouseOver:t=>{var l;se(!0),(l=s.onMouseOver)==null||l.call(s,t)},onMouseLeave:t=>{var l;se(!1),(l=s.onMouseLeave)==null||l.call(s,t)},onFocus:t=>{var l;ce(),(l=s.onFocus)==null||l.call(s,t)},onBlur:t=>{var l;ee(!1),(l=s.onBlur)==null||l.call(s,t)}})),[ue,ce,de,_,pe,c,N,O,s,y?.source,d]),te=n.useMemo(()=>({slots:Array.from({length:c}).map((t,l)=>{var m;let h=G&&O!==null&&N!==null&&(O===N&&l===O||l>=O&&l<N),g=d[l]!==void 0?d[l]:null,o=d[0]!==void 0?null:(m=S?.[l])!=null?m:null;return{char:g,placeholderChar:o,isActive:h,hasFakeCaret:h&&g===null}}),isFocused:G,isHovering:!s.disabled&&ie}),[G,ie,c,N,O,s.disabled,d]),Pe=n.useMemo(()=>j?j(te):n.createElement(we.Provider,{value:te},I),[I,te,j]);return n.createElement(n.Fragment,null,x!==null&&n.createElement("noscript",null,n.createElement("style",null,x)),n.createElement("div",{ref:X,"data-input-otp-container":!0,style:Se,className:M},Pe,n.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},je)))});ye.displayName="Input";function q(e,r){try{e.insertRule(r)}catch{console.error("input-otp could not insert CSS rule:",r)}}var et=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,tt="^\\d+$";function nt({className:e,containerClassName:r,...a}){return u.jsx(ye,{"data-slot":"input-otp",containerClassName:J("flex items-center gap-2 has-disabled:opacity-50",r),className:J("disabled:cursor-not-allowed",e),...a})}function rt({className:e,...r}){return u.jsx("div",{"data-slot":"input-otp-group",className:J("flex items-center",e),...r})}function Z({index:e,className:r,...a}){const i=n.useContext(we),{char:b,hasFakeCaret:c,isActive:C}=i?.slots[e]??{};return u.jsxs("div",{"data-slot":"input-otp-slot","data-active":C,className:J("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",r),...a,children:[b,c&&u.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}function bt({otp:e,open:r,setOpen:a,setOtp:i}){const{verifyEmail:b,isVerifingEmail:c}=Le(),C=Oe();async function E(){e.trim()!==""&&e.length===4?await b({otp:e})=="verified"&&(C.refetchQueries({queryKey:["user"]}),a(!1)):De.error("Invalid OTP",{className:"toast"}),a(!1)}return u.jsx(Ae,{openModal:r,children:u.jsxs(Be,{className:"min-w-md",children:[u.jsxs(We,{className:"flex justify-between items-center",children:[u.jsx(Ie,{children:"Enter OTP"}),u.jsx(ve,{onClick:()=>a(!1),variant:"secondary",children:u.jsx(He,{})})]}),u.jsxs(Ne,{className:`grid \r
				place-items-center gap-2`,children:[u.jsx(_e,{children:"Enter the OTP recieved on your registered email"}),u.jsx(nt,{maxLength:4,value:e,onChange:S=>i(S),pattern:tt,children:u.jsxs(rt,{children:[u.jsx(Z,{index:0}),u.jsx(Z,{index:1}),u.jsx(Z,{index:2}),u.jsx(Z,{index:3})]})})]}),u.jsx(Fe,{children:u.jsx(ve,{className:"w-full",type:"button",onClick:E,disabled:c,children:"Submit"})})]})})}export{bt as default};
