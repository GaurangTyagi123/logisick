const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EditItemModal-BdSrcYf8.js","assets/index-D0_Sot9h.js","assets/index-bkEeQSt0.css","assets/Close-5X7b8tAm.js","assets/Modal-DMArze6l.js","assets/button-BTAYK3jx.js","assets/Typography-BkeLtctd.js","assets/card-uaHBxQ7j.js","assets/separator-Cmc26UhN.js","assets/input-CUKpUeOa.js","assets/label-D-KNEtrA.js","assets/apiItem-BA08D8KX.js","assets/utilfn-DLliPqnw.js","assets/DeleteItemModal-BDASnIRo.js"])))=>i.map(i=>d[i]);
import{r as d,j as e,d as f,L as D,b as y,a as O,y as _,f as P,u as L,g as M,_ as I}from"./index-D0_Sot9h.js";import{C as j,a as h,b as g,c as N}from"./card-uaHBxQ7j.js";import{a as w,M as F}from"./Typography-BkeLtctd.js";import{B as o}from"./button-BTAYK3jx.js";import{S as n}from"./separator-Cmc26UhN.js";import{H as b}from"./Profilepage-DVcwLGOJ.js";import{f as v,p as q,d as A}from"./utilfn-DLliPqnw.js";import{N as z}from"./Navbar-BKOVFpLP.js";import{a as B,c as Q}from"./apiItem-BA08D8KX.js";import{P as G}from"./Docspage-gE5vPmzL.js";import"./UserAvatar-D2ytVRyN.js";function i({field:r,fieldName:s,suffix:a,small:t}){return e.jsxs("div",{className:f("flex justify-between items-center",t?"text-xs":"text-sm"),children:[e.jsxs("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap max-w-4/10",children:[s," :"," "]}),e.jsxs("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap max-w-4/10",children:[r||e.jsx(F,{children:"NA"}),a]})]})}function H({small:r,expiresOn:s}){const a=A(s);return console.log("left days",a),e.jsx("div",{className:f("bg-ls-sec-400 dark:bg-ls-sec-900 rounded-lg w-full flex items-center justify-center gap-1 jet-brains",r?"p-1 text-sm":"p-1 text-md"),children:a<=15&&a>=0?e.jsxs(e.Fragment,{children:[e.jsx(b,{})," item exipres in ",a," days"]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{})," item expired"]})})}function K({className:r,item:s,orgSlug:a,small:t,barebone:x=!1,viewMorePath:m}){const[l,c]=d.useState(!1);return e.jsxs("div",{className:f("aspect-square w-2xs sm:w-xs md:w-sm max-w-11/12 outline-none duration-1000 [perspective:10rem] transform-3d",l&&"[transform:rotateY(180deg)]",t?"max-w-xs":"max-w-md",r),children:[e.jsxs(j,{className:"inset-0 p-2 md:p-4 gap-2 absolute [backface-visibility:hidden]",children:[e.jsxs(h,{className:"w-full h-min ",children:[e.jsx(w,{className:"text-center jet-brains",children:s?.SKU?.substring(25)}),s.expiresOn&&e.jsx(H,{expiresOn:s.expiresOn,small:t})]}),e.jsxs(g,{className:"w-full h-90 gap-2 grid overflow-y-auto scrollbar p-2 md:p-4 rounded-2xl",children:[e.jsx(i,{small:t,field:s.name,fieldName:"Name"}),!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:s.inventoryCategory,fieldName:"Category"}),!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:s.origin,fieldName:"Origin"}),!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:s?.expiresOn?new Date(s?.expiresOn).toLocaleDateString():"",fieldName:"Expires On"}),!x&&e.jsxs(e.Fragment,{children:[!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:v(s.costPrice),fieldName:"Cost Price",suffix:" /-"}),!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:v(s.sellingPrice),fieldName:"Selling Price",suffix:" /-"}),!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:s.quantity,fieldName:"Quantity",suffix:" units"}),!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:new Date(s.importedOn).toLocaleDateString(),fieldName:"Imported On"}),!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:s.colour,fieldName:"Colour"}),!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:s.weight&&q(s.weight),fieldName:"Weight"}),!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:s.importance,fieldName:"Importance"}),!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:s.reorderLevel,fieldName:"Reorder Level"}),!t&&e.jsx(n,{}),e.jsx(i,{small:t,field:s.batchNumber,fieldName:"Batch Number"})]})]}),e.jsxs(N,{className:"grid grid-cols-2 gap-1 p-0 md:p-0",children:[e.jsx(o,{onClick:()=>c(!0),className:"col-span-1 w-full",size:"sm",children:"Show Qrcode"}),e.jsx(D,{to:m||"/authenticate",className:"col-span-1",children:e.jsxs(o,{className:"w-full",size:"sm",children:["More"," ",e.jsx("span",{className:"hidden sm:flex",children:"About Item"})]})})]})]}),e.jsxs(j,{className:"inset-0 size-full p-2 md:p-4 gap-2 absolute [backface-visibility:hidden] [transform:rotateY(180deg)]",children:[e.jsx(h,{className:"w-full text-center",children:e.jsx(w,{className:"jet-brains",children:"Scan Me"})}),e.jsx(g,{className:"grid place-items-center",children:e.jsx("img",{src:`https://encode.ravishdev.org/api/create/text_url?text_url=https://logisick.ravishdev.org/item/${a}/${s?.SKU}&fg=%2368a872&bg=%230e2033`,alt:s?.name.substring(0,10),className:"rounded-2xl md:max-w-10/12 max-w-2/3"})}),e.jsx(N,{className:"w-full p-0 md:p-0",children:e.jsx(o,{onClick:()=>c(!1),className:"w-full",children:"Show Information"})})]})]})}function R(r){const{data:s,isPending:a}=y({queryKey:["item",r],queryFn:()=>B(r),staleTime:0});return{item:s,isGettingItem:a}}function U(r){const{data:s,isPending:a}=y({queryKey:["employee-status"],queryFn:()=>Q(r)});return{isEmployee:s,isCheckingEmployment:a}}const T=d.lazy(()=>I(()=>import("./EditItemModal-BdSrcYf8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),$=d.lazy(()=>I(()=>import("./DeleteItemModal-BDASnIRo.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,9,10,8,11])));function ie(){const{SKU:r,orgSlug:s}=O();(!r||!s)&&_.error("Item not found",{className:"toast"});const{item:a,isGettingItem:t}=R(r||""),{user:x,isCheckingAuth:m}=P(),{isEmployee:l,isCheckingEmployment:c}=U(s||""),C=x?.user,k=L(),[E,u]=d.useState(!1),[S,p]=d.useState(!1);return t||m||c?e.jsx(M,{}):e.jsxs("div",{className:"flex flex-col justify-start gap-3 items-center bg-ls-bg-300 dark:bg-ls-bg-dark-800 min-h-dvh relative",children:[e.jsx(z,{hide:{userButton:!0},children:e.jsxs(o,{variant:"outline",onClick:()=>k(-1),children:[e.jsx(G,{})," ",e.jsx("span",{className:"hidden sm:flex",children:"Go Back"})]})}),a?e.jsxs("main",{className:"grid gap-2 p-2 rounded-2xl items-center place-items-center",children:[e.jsx(K,{item:a,orgSlug:s||"",viewMorePath:C?"/dashboard":"/authenticate",barebone:!l}),!!l&&e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx(o,{variant:"secondary",className:"flex-1",onClick:()=>p(!0),children:"Edit Item Data"}),e.jsx(o,{variant:"destructive",className:"flex-1",onClick:()=>u(!0),children:"Delete Data"}),e.jsx($,{open:E,setOpen:u,itemData:a}),e.jsx(T,{open:S,setOpen:p,item:a})]})]}):e.jsx("div",{className:"grid place-items-center gap-2 p-2 w-md max-w-11/12 outline-1 rounded-2xl items-center",children:"Not Item Found"})]})}export{ie as default};
