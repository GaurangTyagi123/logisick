const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OtpModal-DJY68uUo.js","assets/index-BTqsFGzI.js","assets/index-bkEeQSt0.css","assets/Modal-BLI6cZw-.js","assets/card-D9cROTRP.js","assets/Typography-SW8h9KUc.js","assets/button-Bi1CbZ-Y.js","assets/Close-gHDstr_r.js","assets/Profilepage-BkbBg89T.js","assets/Navbar-CCS44x7q.js","assets/UserAvatar-BSqINoZW.js","assets/separator-DGwrj2LX.js","assets/table-DLYVcJ58.js","assets/badge-BvhFBbJn.js","assets/useGetOrganizations-BGn5n4F5.js","assets/apiOrg-CsUkuOvK.js","assets/skeleton-DHa_xJ0E.js","assets/DeleteMeModal-_s-Dcttd.js","assets/input-DmIDtVMO.js","assets/label-C4ZKI0uH.js","assets/ChangePasswordModal-CSmpjoIu.js","assets/Authenticatepage-wIJ5G5bO.js","assets/apiUser-9AySzHsM.js","assets/ProfilePicChangeModal-BWGZiu6v.js","assets/useUpdateUser-pg07cuRj.js","assets/DeleteOrgModal-DoB9sx_y.js","assets/EditOrgModal-laXGnMG9.js","assets/index.esm-DJLMEGFI.js","assets/Select-Ctl_6Mes.js","assets/index-CO4CwwID.js","assets/Pagination-Ds56sGku.js","assets/TransferOwnershipModal-DNRa-ORo.js","assets/UpdateUserModal-DeIY-Y6Q.js"])))=>i.map(i=>d[i]);
import{o as F,h as T,y as c,p as G,j as e,L as Q,d as Y,c as J,r as a,_ as d}from"./index-BTqsFGzI.js";import{S as $,a as K,E as P,T as W,D as M,V as X,H as Z}from"./Profilepage-BkbBg89T.js";import{B as m}from"./button-Bi1CbZ-Y.js";import{N as ee}from"./Navbar-CCS44x7q.js";import{U as se}from"./UserAvatar-BSqINoZW.js";import{a as ae,S as te,b as re,L as le,M as ie}from"./Typography-SW8h9KUc.js";import{C as ne,a as oe,d as ce,b as de}from"./card-D9cROTRP.js";import{T as V,a as f,b as o,c as z,d as i,e as me}from"./table-DLYVcJ58.js";import{B as b}from"./badge-BvhFBbJn.js";import{u as xe}from"./useGetOrganizations-BGn5n4F5.js";import{D as ue,a as fe,b as he,c as w,m as y}from"./separator-DGwrj2LX.js";import{S as x}from"./skeleton-DHa_xJ0E.js";function S(s,r){if(G(s)){const l=s.response?.data?.message||r;console.log(s),c.error(l,{className:"toast"})}else console.log(s)}const pe=F(s=>({isVerifingEmail:!1,isDeleteingUser:!1,verifyEmail:async r=>{try{s({isVerifingEmail:!0});const l=await T.post("/v1/auth/verifyEmail",r);if(l.data.data.message.toLowerCase().includes("already"))return s({isVerifingEmail:!1}),c.success(l.data.data.message,{className:"toast"}),"already";if(l.data.data.message.toLowerCase().includes("sent"))return s({isVerifingEmail:!1}),c.success(l.data.data.message,{className:"toast"}),"sent";if(l.data.data.message.toLowerCase().includes("successfully"))return s({isVerifingEmail:!1}),c.success(l.data.data.message,{className:"toast"}),"verified"}catch(l){S(l,"Error verifing email")}finally{s({isVerifingEmail:!1})}},deleteUser:async()=>{try{s({isDeleteingUser:!0}),await T.delete("/v1/users/updateMe"),c.success("User deleted successfully",{className:"toast"})}catch(r){S(r,"Error deleting user")}finally{s({isDeleteingUser:!1})}}}));function ge(){return e.jsxs(e.Fragment,{children:[e.jsx(V,{children:e.jsxs(f,{children:[e.jsx(o,{children:"Organization"}),e.jsx(o,{children:"Role"}),e.jsx(o,{children:"Subscription"}),e.jsx(o,{children:"Members"}),e.jsx(o,{children:"Type"})]})}),e.jsx(z,{children:[1,2,3,4,5].map((s,r)=>e.jsxs(f,{children:[e.jsx(i,{children:e.jsx(x,{className:"h-10"})}),e.jsx(i,{children:e.jsx(x,{className:"h-10"})}),e.jsx(i,{children:e.jsx(x,{className:"h-10"})}),e.jsx(i,{children:e.jsx(x,{className:"h-10"})}),e.jsx(i,{children:e.jsx(x,{className:"h-10"})})]},r))})]})}const je=s=>{switch(s){case"Pro":return"bg-violet-600 dark:bg-violet-500 text-primary-foreground";case"Basic":return"bg-yellow-600 dark:bg-yellow-500 text-primary-foreground";case"None":return"bg-secondary text-secondary-foreground";default:return"bg-muted text-muted-foreground"}};function be(s){switch(s){case"Owner":return"text-black bg-yellow-400 dark:text-black dark:bg-yellow-400";case"Admin":return"text-black bg-violet-400 dark:text-black dark:bg-violet-400";case"Manager":return"text-black bg-green-400 dark:text-black dark:bg-green-400";case"Staff":return"text-white bg-zinc-800 dark:text-black dark:bg-zinc-200";default:return"text-black bg-zinc-300 outline-1 dark:text-white dark:bg-zinc-800 "}}function we({setDeleteOpen:s,setEditOpen:r,setOpenTransfer:l}){const{data:h,isGettingOrganizations:t}=xe();return e.jsxs(ne,{className:"bg-white dark:bg-ls-bg-dark-800 h-96 w-full",children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Organizations"]})}),e.jsx(de,{className:"overflow-x-auto h-full",children:e.jsx(me,{children:t?e.jsx(ge,{}):h.length===0?e.jsxs("div",{className:"h-full w-full grid place-items-center gap-3",children:[e.jsx(ae,{children:"You are not in any organizations."}),e.jsx(m,{asChild:!0,children:e.jsx(Q,{to:"/dashboard",children:"Create/Join a Organization"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{children:e.jsxs(f,{children:[e.jsx(o,{children:"Organization"}),e.jsx(o,{children:"Role"}),e.jsx(o,{children:"Subscription"}),e.jsx(o,{children:"Members"}),e.jsx(o,{children:"Type"})]})}),e.jsx(z,{className:"max-h-96 overflow-y-scroll",children:h.map(n=>e.jsxs(f,{className:"hover:bg-muted/50",children:[e.jsx(i,{className:"font-medium",children:n.name}),e.jsx(i,{children:e.jsx(b,{variant:"outline",className:Y("font-medium",be("Owner")),children:n.role})}),e.jsx(i,{children:e.jsx(b,{className:je(n.subscription),children:n.subscription})}),e.jsxs(i,{className:"text-muted-foreground",children:[n?.totalEmployees??1," members"]}),e.jsx(i,{children:e.jsx(b,{variant:"outline",children:n.type})}),n.role.toLowerCase()==="owner"&&e.jsx(i,{className:"w-[5px]",children:e.jsxs(ue,{children:[e.jsx(fe,{children:e.jsx(K,{className:"w-5 h-5 outline rounded-sm cursor-pointer outline-offset-2"})}),e.jsxs(he,{className:"font-semibold bg-ls-bg-100 dark:bg-ls-bg-dark-800",children:[e.jsxs(w,{className:"cursor-pointer",onClick:()=>r(!0),children:[e.jsx(P,{}),"EDIT"]}),e.jsx(y,{}),e.jsxs(w,{className:"cursor-pointer",onClick:()=>l(!0),children:[e.jsx(W,{}),"TRANSFER"]}),e.jsx(y,{}),e.jsxs(w,{className:"cursor-pointer",onClick:()=>s(!0),children:[e.jsx(M,{className:"text-red-500"}),e.jsx(te,{className:"text-red-500",children:"DELETE"})]}),e.jsx(y,{})]})]})})]},n._id))})]})})})]})}const ye=a.lazy(()=>d(()=>import("./OtpModal-DJY68uUo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))),Ne=a.lazy(()=>d(()=>import("./DeleteMeModal-_s-Dcttd.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,18,19,11,8,9,10,12,13,14,15,16]))),ve=a.lazy(()=>d(()=>import("./ChangePasswordModal-CSmpjoIu.js"),__vite__mapDeps([20,1,2,3,6,5,4,7,19,11,18,21,22,9,10]))),_e=a.lazy(()=>d(()=>import("./ProfilePicChangeModal-BWGZiu6v.js"),__vite__mapDeps([23,1,2,7,3,6,5,4,10,18,8,24,22,19,11]))),Ee=a.lazy(()=>d(()=>import("./DeleteOrgModal-DoB9sx_y.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,18,19,11,15]))),Oe=a.lazy(()=>d(()=>import("./EditOrgModal-laXGnMG9.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,27,19,11,18,28,29,30,15]))),ke=a.lazy(()=>d(()=>import("./TransferOwnershipModal-DNRa-ORo.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,27,19,11,15,18]))),Ce=a.lazy(()=>d(()=>import("./UpdateUserModal-DeIY-Y6Q.js"),__vite__mapDeps([32,1,2,3,6,5,4,7,19,11,18,24,22])));function De(){const{verifyEmail:s,isVerifingEmail:r}=pe(),t=J().getQueryData(["user"])?.user,[n,N]=a.useState(!1),[L,v]=a.useState(!1),[p,g]=a.useState(!1),[U,_]=a.useState(!1),[A,E]=a.useState(!1),[R,O]=a.useState(!1),[I,k]=a.useState(!1),[H,C]=a.useState(!1),[B,j]=a.useState(""),[q,D]=a.useState(t?.avatar||"");return a.useEffect(()=>{let u;return!t?.isVerified&&!p&&!r&&(u=c.warning(e.jsxs("div",{className:"grid h-auto",children:["Your Email is not verified",e.jsx(m,{variant:"default",disabled:r,onClick:async()=>{await s({})=="sent"&&(g(!0),j("")),c.dismiss(u)},children:"Click to Verify"})]}),{className:"toast"})),()=>c.dismiss(u)},[r,t?.isVerified,s,p]),e.jsxs("div",{className:"w-full px-4 h-auto min-h-screen flex flex-col gap-2 items-center relative bg-ls-bg-200 dark:bg-ls-bg-dark-900 pb-10",children:[e.jsx(ee,{}),e.jsxs("div",{className:"max-w-6xl p-4 w-full grid place-items-center md:flex gap-4 rounded-2xl shadow-2xl bg-white dark:bg-ls-bg-dark-800",children:[e.jsxs("div",{className:"w-40 h-40 grid place-items-center relative",children:[e.jsx(se,{customSeed:t?.avatar||t?.email,className:"w-40 h-40 ring-4 ring-offset-2 ring-ls-sec-500"}),e.jsx(m,{className:"absolute right-2 bottom-2 rounded-full",onClick:()=>{N(!0),D(t?.avatar||t?.email)},children:e.jsx(P,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col justify-between h-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex gap-2 flex-row justify-center md:justify-start items-center text-ls-ter-800 dark:text-ls-ter-500",children:[e.jsx(re,{className:"pb-0",children:t?.name}),t?.isVerified?e.jsx(X,{}):e.jsx(m,{variant:"ghost",disabled:r,title:"verify your email",className:"grid place-items-center p-0",onClick:async()=>{await s({})=="sent"&&(g(!0),j(""))},children:e.jsx(Z,{className:"h-full w-full"})})]}),e.jsx(le,{className:"text-center md:text-start text-ls-sec-800 dark:text-ls-sec-400",children:t?.email})]}),e.jsxs(ie,{className:"text-sm text-center md:text-start",children:["Member since :"," ",new Date(t?.createdAt??"").toLocaleDateString()]})]})]}),e.jsxs("main",{className:"max-w-6xl w-full flex flex-col-reverse md:flex-row gap-2 ",children:[e.jsx(we,{setDeleteOpen:O,setEditOpen:k,setOpenTransfer:C}),e.jsxs("div",{className:"md:min-h-96 gap-2 grid  md:flex md:flex-col",children:[e.jsx(m,{onClick:()=>{t?.isVerified?v(!0):c.error("User must be verified to update information",{className:"toast"})},variant:"secondary",children:"Update User"}),e.jsx(m,{onClick:()=>_(!0),variant:"secondary",children:"Change Password"}),e.jsxs(m,{variant:"destructive",onClick:()=>E(!0),children:[e.jsx(M,{className:"h-full aspect-square"}),"Delete Me"]})]})]}),e.jsx(_e,{open:n,setOpen:N,modalPic:q,setModalPic:D}),e.jsx(ye,{open:p,setOpen:g,otp:B,setOtp:j}),e.jsx(ve,{open:U,setOpen:_}),e.jsx(Oe,{setOpen:k,open:I}),e.jsx(ke,{open:H,setOpen:C}),e.jsx(Ne,{open:A,setOpen:E}),e.jsx(Ee,{open:R,setOpen:O,orgId:t?.myOrg?._id}),e.jsx(Ce,{open:L,setOpen:v})]})}const qe=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"}));export{qe as P,pe as u};
