import{j as e,a as v,y as j,r as u,u as S,i as M,d as g,L as w}from"./index-CNmL9Fba.js";import{M as B}from"./Modal-B4a1-HHj.js";import{C as k,a as N,b as y,c as C,d as z}from"./card-Br5fvIHU.js";import{u as F,B as r,d as P,S as q,b as D,L as V,M as E}from"./button-ozJThDYe.js";import{C as T}from"./Close-D9iPeWNZ.js";import{u as G,C as H}from"./index.esm-BXusb3e2.js";import{L as x}from"./label-BQg-PjmS.js";import{I as b}from"./input-CR--nAY7.js";import{S as I,a as Q,b as W,c as A,d as Y}from"./Select-D2CfQP7R.js";import{c as $}from"./apiOrg-DEJMxLds.js";import{N as J}from"./Navbar-tXB-_T9S.js";import{B as K}from"./badge-CqELHxKc.js";import{u as R}from"./useGetOrganizations-CfoMXtDO.js";import"./separator-BvMHK9S3.js";import"./index-CfAmDhfc.js";import"./Pagination-CICGELIt.js";import"./UserAvatar-0quN_wyH.js";function _(s){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...s,children:e.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 12h14m-7-7v14"})})}function U(s){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...s,children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[e.jsx("path",{d:"M12 3v18m-9-9h18"}),e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})]})})}function X(s){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...s,children:e.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5h.01M3 12h.01M3 19h.01M8 5h13M8 12h13M8 19h13"})})}const Z=["Basic","Small-Cap","Mid-Cap","Large-Cap","Other"];function ee({open:s,setOpen:t}){const{register:a,handleSubmit:l,formState:c,control:h,reset:f}=G(),{errors:i}=c,o=v(),{mutate:m,isPending:d}=F({mutationFn:$,onSuccess:()=>{o.invalidateQueries({queryKey:["orgs"]}),j.success("Organization created successfully",{className:"toast"})},onError:n=>{j.error(n.message,{className:"toast"})},onSettled:()=>{f()}}),O=n=>{m(n),t(!1)};return e.jsx(B,{openModal:s,children:e.jsxs(k,{className:"w-md max-w-11/12",children:[e.jsxs(N,{className:"flex justify-between items-center",children:[e.jsx(y,{children:"Create Organization"}),e.jsx(r,{onClick:()=>t(!1),variant:"secondary",children:e.jsx(T,{})})]}),e.jsx(C,{className:"grid gap-2",children:e.jsxs("form",{children:[e.jsxs(x,{title:"Previous Password field is required",htmlFor:"name",className:"grid gap-4 my-3",children:["Organization's Name",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(b,{placeholder:"Enter Your Organization's Name",type:"text",id:"name",className:"text-sm md:text-md",...a("name",{required:"Please provide a name",minLength:{value:1,message:"Name is too short"},maxLength:{value:48,message:"Name is too long"}})})}),i?.name&&e.jsx("span",{className:"text-xs text-red-500",children:i?.name?.message})]}),e.jsxs(x,{title:"Previous Password field is required",htmlFor:"Description",className:"grid gap-4",children:["Organization's Description",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(b,{placeholder:"Enter a brief description ",type:"text",id:"Description",className:"text-sm md:text-md",...a("description",{required:"Please provide a description of your organization",minLength:{value:8,message:"Description is too short"},maxLength:{value:300,message:"Description is too long"}})})}),i?.description&&e.jsx("span",{className:"text-xs text-red-500",children:i?.description?.message})]}),e.jsxs(x,{title:"Previous Password field is required",htmlFor:"Type",className:"grid gap-4 mt-3 w-full",children:["Type",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(H,{name:"type",control:h,render:({field:n})=>e.jsxs(I,{onValueChange:n.onChange,value:n.value,children:[e.jsx(Q,{className:"w-full",children:e.jsx(W,{placeholder:"Basic",defaultValue:"Basic"})}),e.jsx(A,{children:Z.map((p,L)=>e.jsx(Y,{value:p,children:p},L))})]})})})]})]})}),e.jsx(z,{children:e.jsx(r,{className:"w-full",type:"submit",onClick:l(O),disabled:d,children:"Submit"})})]})})}function se(s){switch(s){case"Owner":return"text-black bg-yellow-400 dark:text-black dark:bg-yellow-400";case"Admin":return"text-black bg-violet-400 dark:text-black dark:bg-violet-400";case"Manager":return"text-black bg-green-400 dark:text-black dark:bg-green-400";case"Staff":return"text-white bg-zinc-800 dark:text-black dark:bg-zinc-200";default:return"text-black bg-zinc-300 outline-1 dark:text-white dark:bg-zinc-800 "}}function te({org:s,view:t}){return e.jsxs(k,{className:g("bg-ls-bg-300 dark:bg-ls-bg-dark-800 min-h-40 flex flex-1 hover:border-zinc-500 transition-colors duration-100","justify-between"),children:[e.jsxs(N,{className:"grid md:flex justify-between items-center",children:[e.jsx(y,{className:"overflow-hidden px-1 text-ellipsis whitespace-nowrap",children:e.jsx(V,{children:s.name})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{className:g(se(""),"font-semibold shadow-md"),children:s.role}),t==="list"&&e.jsx(r,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(w,{to:`/dashboard/${s?.slug}`,children:"View Organization"})})]})]}),e.jsx(C,{children:e.jsx(E,{className:"line-clamp-2",children:s.description})}),t==="grid"&&e.jsx(z,{className:"flex justify-center md:justify-end mt-auto",children:e.jsx(r,{asChild:!0,children:e.jsx(w,{to:`/dashboard/${s?.slug}`,className:"w-full md:w-fit",children:"View Organization"})})})]})}function be(){const[s,t]=u.useState(!1),[a,l]=u.useState("grid"),c=S(),i=v().getQueryData(["user"])?.user,{data:o,isGettingOrganizations:m}=R();return i||c("/"),m?e.jsx(M,{fullscreen:!0}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex flex-col gap-3 p-1 md:p-3 min-h-dvh bg-ls-bg-200 dark:bg-ls-bg-dark-900 relative",children:[e.jsx(J,{}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center king-julian md:px-4 gap-2 px-2",children:[e.jsx(P,{children:"Organizations"}),e.jsxs("div",{className:"flex gap-2 justify-between w-full sm:w-fit sm:justify-center",children:[e.jsxs("div",{className:"flex",children:[e.jsx(r,{variant:a==="grid"?"default":"outline",className:"ml-auto rounded-r-none",onClick:()=>l("grid"),title:"grid view",children:e.jsx(U,{})}),e.jsx(r,{variant:a==="list"?"default":"outline",className:"rounded-l-none",onClick:()=>l("list"),title:"list view",children:e.jsx(X,{})})]}),e.jsxs(r,{size:"lg",className:"top-10 right-20 w-fit",onClick:()=>t(!0),children:[e.jsx(q,{children:"Add new Org"}),e.jsx(_,{})]})]})]}),e.jsx("div",{className:g("min-h-96 justify-between items-start outline-1 p-1 md:p-3 rounded-2xl grid gap-2",a==="grid"?"grid-cols-[repeat(auto-fit,minmax(300px,1fr))]":"grid-cols-1"),children:o.length===0?e.jsxs("div",{className:"h-full w-full flex flex-col justify-center items-center gap-3",children:[e.jsx(D,{children:"You are not in any organizations."}),e.jsx(r,{onClick:()=>t(!0),children:"Create/Join a Organization"})]}):o.map(d=>e.jsx(te,{org:d,view:a},d._id))}),e.jsx(u.Suspense,{children:e.jsx(ee,{open:s,setOpen:t})})]})})}export{be as default};
