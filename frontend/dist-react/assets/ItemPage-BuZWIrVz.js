const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EditItemModal-Bx7OHSzp.js","assets/index-DGdq0UJg.js","assets/index-4ul3zOFW.css","assets/Close-B_kHsTBg.js","assets/Modal-DKjyBxId.js","assets/button-BJYD--B9.js","assets/card-DED02hlv.js","assets/separator-DZ5S64f-.js","assets/input-BQR0Vhqq.js","assets/label-DsFwhH02.js","assets/apiItem-sv9YjtW1.js","assets/utilfn-VpFqLrdN.js","assets/DeleteItemModal-BV2ai7-7.js"])))=>i.map(i=>d[i]);
import{r as o,j as e,d as u,L as D,b as y,c as O,y as _,g as P,u as L,i as M,_ as I}from"./index-DGdq0UJg.js";import{C as j,a as h,b as g,c as N}from"./card-DED02hlv.js";import{a as w,B as d,M as q}from"./button-BJYD--B9.js";import{S as i}from"./separator-DZ5S64f-.js";import{H as A}from"./Profilepage-Qxb2z0jF.js";import{d as b,f as v,p as F}from"./utilfn-VpFqLrdN.js";import{N as z}from"./Navbar-vJQGtm-N.js";import{b as B,c as Q}from"./apiItem-sv9YjtW1.js";import{P as G}from"./Docspage-CJhTusYp.js";import"./UserAvatar-8Gg3wf1Y.js";function a({field:n,fieldName:s,suffix:r,small:t}){return e.jsxs("div",{className:u("flex justify-between items-center",t?"text-xs":"text-sm"),children:[e.jsxs("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap max-w-4/10",children:[s," :"," "]}),e.jsxs("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap max-w-4/10",children:[n||e.jsx(q,{children:"NA"}),r]})]})}function H({className:n,item:s,orgSlug:r,small:t,barebone:x=!1,viewMorePath:m}){const[c,l]=o.useState(!1);return e.jsxs("div",{className:u("aspect-square w-2xs sm:w-xs md:w-sm max-w-11/12 outline-none duration-1000 [perspective:10rem] transform-3d",c&&"[transform:rotateY(180deg)]",t?"max-w-xs":"max-w-md",n),children:[e.jsxs(j,{className:"inset-0 p-2 md:p-4 gap-2 absolute [backface-visibility:hidden]",children:[e.jsxs(h,{className:"w-full h-min ",children:[e.jsx(w,{className:"text-center jet-brains",children:s?.SKU?.substring(25)}),s.expiresOn&&b(s.expiresOn)<=15&&e.jsxs("div",{className:u("bg-ls-sec-400 dark:bg-ls-sec-900 rounded-lg w-full flex items-center justify-center gap-1 jet-brains",t?"p-1 text-sm":"p-1 text-md"),children:[e.jsx(A,{})," item exipres in"," ",b(s.expiresOn)," days"]})]}),e.jsxs(g,{className:"w-full h-90 gap-2 grid overflow-y-auto scrollbar p-2 md:p-4 rounded-2xl",children:[e.jsx(a,{small:t,field:s.name,fieldName:"Name"}),!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:s.inventoryCategory,fieldName:"Category"}),!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:s.origin,fieldName:"Origin"}),s?.expiresOn&&e.jsxs(e.Fragment,{children:[!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:new Date(s.expiresOn).toLocaleDateString(),fieldName:"Expires On"})]}),!x&&e.jsxs(e.Fragment,{children:[!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:v(s.costPrice),fieldName:"Cost Price",suffix:" /-"}),!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:v(s.sellingPrice),fieldName:"Selling Price",suffix:" /-"}),!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:s.quantity,fieldName:"Quantity",suffix:" units"}),!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:new Date(s.importedOn).toLocaleDateString(),fieldName:"Imported On"}),!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:s.colour,fieldName:"Colour"}),!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:s.weight&&F(s.weight),fieldName:"Weight"}),!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:s.importance,fieldName:"Importance"}),!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:s.reorderLevel,fieldName:"Reorder Level"}),!t&&e.jsx(i,{}),e.jsx(a,{small:t,field:s.batchNumber,fieldName:"Batch Number"})]})]}),e.jsxs(N,{className:"grid grid-cols-2 gap-1 p-0 md:p-0",children:[e.jsx(d,{onClick:()=>l(!0),className:"col-span-1 w-full",size:"sm",children:"Show Qrcode"}),e.jsx(D,{to:m||"/authenticate",className:"col-span-1",children:e.jsxs(d,{className:"w-full",size:"sm",children:["More ",e.jsx("span",{className:"hidden sm:flex",children:"About Item"})]})})]})]}),e.jsxs(j,{className:"inset-0 size-full p-2 md:p-4 gap-2 absolute [backface-visibility:hidden] [transform:rotateY(180deg)]",children:[e.jsx(h,{className:"w-full text-center",children:e.jsx(w,{className:"jet-brains",children:"Scan Me"})}),e.jsx(g,{className:"grid place-items-center",children:e.jsx("img",{src:`https://encode.ravishdev.org/api/create/text_url?text_url=https://logisick.ravishdev.org/item/${r}/${s?.SKU}&fg=%2368a872&bg=%230e2033`,alt:s?.name.substring(0,10),className:"rounded-2xl md:max-w-10/12 max-w-2/3"})}),e.jsx(N,{className:"w-full p-0 md:p-0",children:e.jsx(d,{onClick:()=>l(!1),className:"w-full",children:"Show Information"})})]})]})}function K(n){const{data:s,isPending:r}=y({queryKey:["item",n],queryFn:()=>B(n),staleTime:0});return{item:s,isGettingItem:r}}function R(n){const{data:s,isPending:r}=y({queryKey:["employee-status"],queryFn:()=>Q(n)});return{isEmployee:s,isCheckingEmployment:r}}const U=o.lazy(()=>I(()=>import("./EditItemModal-Bx7OHSzp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),T=o.lazy(()=>I(()=>import("./DeleteItemModal-BV2ai7-7.js"),__vite__mapDeps([12,1,2,3,4,5,6,8,9,7,10])));function ae(){const{SKU:n,orgSlug:s}=O();(!n||!s)&&_.error("Item not found",{className:"toast"});const{item:r,isGettingItem:t}=K(n||""),{user:x,isCheckingAuth:m}=P(),{isEmployee:c,isCheckingEmployment:l}=R(s||""),C=x?.user,k=L(),[S,f]=o.useState(!1),[E,p]=o.useState(!1);return t||m||l?e.jsx(M,{}):e.jsxs("div",{className:"flex flex-col justify-start gap-3 items-center bg-ls-bg-300 dark:bg-ls-bg-dark-800 min-h-dvh relative",children:[e.jsx(z,{hide:{userButton:!0},children:e.jsxs(d,{variant:"outline",onClick:()=>k(-1),children:[e.jsx(G,{})," ",e.jsx("span",{className:"hidden sm:flex",children:"Go Back"})]})}),r?e.jsxs("main",{className:"grid gap-2 p-2 rounded-2xl items-center place-items-center",children:[e.jsx(H,{item:r,orgSlug:s||"",viewMorePath:C?"/dashboard":"/authenticate",barebone:!c}),!!c&&e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx(d,{variant:"secondary",className:"flex-1",onClick:()=>p(!0),children:"Edit Item Data"}),e.jsx(d,{variant:"destructive",className:"flex-1",onClick:()=>f(!0),children:"Delete Data"}),e.jsx(T,{open:S,setOpen:f,itemData:r}),e.jsx(U,{open:E,setOpen:p,item:r})]})]}):e.jsx("div",{className:"grid place-items-center gap-2 p-2 w-md max-w-11/12 outline-1 rounded-2xl items-center",children:"Not Item Found"})]})}export{ae as default};
