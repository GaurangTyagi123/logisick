import{a as F,u as C,m as S,y as u,s as k,n as q,r as d,j as e}from"./index-CNmL9Fba.js";import{B as R}from"./BigHeading-D_pnALM0.js";import{u as P,d as A,B as m}from"./button-ozJThDYe.js";import{I as c}from"./input-CR--nAY7.js";import{L as g}from"./label-BQg-PjmS.js";import{S as L}from"./separator-BvMHK9S3.js";import{E as N,a as b,G as E}from"./Authenticatepage-C0eEjlWh.js";import{N as z}from"./Navbar-tXB-_T9S.js";import"./UserAvatar-0quN_wyH.js";function Y(){const o=F(),s=C(),{mutate:i,isPending:a}=P({mutationFn:S,onSuccess:()=>{u.success("LoggedIn Successfully",{className:"toast"}),o.invalidateQueries({queryKey:["user"]}),s("/")},onError:r=>{u.error(r.message,{className:"toast"})}});return{loginFn:i,isLoggingIn:a}}function Z(){const o=F(),s=C(),{mutate:i,isPending:a}=P({mutationFn:k,onSuccess:()=>{u.success("Sign up successfull",{className:"toast"}),o.invalidateQueries({queryKey:["user"]}),s("/")},onError:r=>{u.error(r.message,{className:"toast"})}});return{signupFn:i,isSigningUp:a}}function B(){const{mutate:o,isPending:s}=P({mutationFn:q,onSuccess:i=>{u.success(i?.message,{className:"toast"})},onError:i=>{u.error(i.message,{className:"toast"})}});return{sendForgotPassword:o,isSendingForgotPassword:s}}function I({setFormType:o}){const[s,i]=d.useState({email:"",password:""}),[a,r]=d.useState({email:!0,password:!0}),[n,x]=d.useState(!1),{sendForgotPassword:p,isSendingForgotPassword:w}=B(),{loginFn:f,isLoggingIn:h}=Y(),j=l=>{l.trim().length>=8?r({...a,password:!0}):r({...a,password:!1})};function v(l){r({...a,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(l)})}const t=l=>{l.preventDefault(),s.email.trim()!==""&&s.password.length>=8&&f(s)},y=()=>{if(s.email.trim().length==0&&a.email){u.error("Email is required to reset password",{className:"toast"});return}else p({email:s.email})};return e.jsxs("form",{onSubmit:t,className:"bg-ls-bg-100 dark:bg-ls-bg-dark-800 flex flex-col max-w-2xl gap-4 p-4 border md:min-w-lg rounded-2xl shadow-2xl",style:{maxWidth:"calc(100% - 2rem)"},children:[e.jsx(A,{className:"mb-2 text-center",children:"Login User"}),e.jsxs(g,{title:"Email field is required",htmlFor:"email",className:"grid",children:["Email *",e.jsx(c,{placeholder:"Enter Your Email",type:"email",autoComplete:"work email",value:s.email,name:"email",required:!0,className:"text-sm md:text-md",onChange:l=>{i({...s,email:l.target.value.trim()}),l.target.value.trim()!=""?v(l.target.value.trim()):r({...a,email:!0})}}),!a.email&&e.jsx("span",{className:"text-xs text-red-500",children:"*Not a valid Email"})]}),e.jsxs(g,{title:"Password field is required",htmlFor:"password",className:"grid",children:["Password *",e.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[e.jsx(c,{placeholder:"Enter Your Password",type:n?"text":"password",value:s.password,name:"password",required:!0,autoComplete:"current-password",className:"text-sm md:text-md",onChange:l=>{i({...s,password:l.target.value.trim()}),l.target.value.trim()!=""?j(l.target.value.trim()):r({...a,password:!0})}}),e.jsx(m,{onClick:()=>x(!n),type:"button",variant:"ghost",children:n?e.jsx(N,{}):e.jsx(b,{})})]}),!a.password&&e.jsx("span",{className:"text-xs text-red-500",children:"*Password must be atleast 8 character"})]}),e.jsx(m,{variant:"link",className:"",onClick:y,type:"button",disabled:w,children:"Forgot Password?"}),e.jsx(m,{className:"mt-4 font-semibold",type:"submit",disabled:h,children:"Login"}),e.jsx(m,{variant:"link",type:"button",onClick:()=>o("register"),children:"Don't have an Account?"}),e.jsxs(m,{onClick:l=>{l.stopPropagation(),window.location.href="https://logisick.onrender.com/auth/google"},type:"button",className:"font-semibold",children:[e.jsx(E,{className:"ring-4 ring-white rounded-full bg-white"}),e.jsx("span",{children:"Login with Google account"})]})]})}function G({setFormType:o}){const[s,i]=d.useState({name:"",email:"",password:"",confirmPassword:""}),[a,r]=d.useState({email:!0,password:!0,confirmPassword:!0}),[n,x]=d.useState(!1),{signupFn:p,isSigningUp:w}=Z(),f=t=>{t.trim().length>=8?r({...a,password:!0}):r({...a,password:!1})},h=t=>{t.trim()===s.password.trim()?r({...a,confirmPassword:!0}):r({...a,confirmPassword:!1})};function j(t){r({...a,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)})}const v=t=>{t.preventDefault(),s.name!=""&&s.email.trim()!==""&&s.password.length>=8&&s.confirmPassword===s.password&&p(s)};return e.jsxs("form",{onSubmit:v,className:"bg-ls-bg-100 dark:bg-ls-bg-dark-800 flex flex-col max-w-2xl gap-4 p-4 py-4 border md:min-w-lg rounded-2xl shadow-2xl",style:{maxWidth:"calc(100% - 2rem)"},children:[e.jsx("h2",{className:"mb-2 text-3xl text-center",children:"Register New User"}),e.jsxs(g,{title:"Full Name field is required",htmlFor:"name",className:"grid",children:["Full Name *",e.jsx(c,{placeholder:"Enter Your Full Name",type:"text",value:s.name,name:"name",required:!0,className:"text-sm md:text-md",onChange:t=>{i({...s,name:t.target.value})}})]}),e.jsxs(g,{title:"Email field is required",htmlFor:"email",className:"grid",children:["Email *",e.jsx(c,{placeholder:"Enter Your Email",type:"email",autoComplete:"work email",value:s.email,name:"email",required:!0,className:"text-sm md:text-md",onChange:t=>{i({...s,email:t.target.value.trim()}),t.target.value.trim()!=""?j(t.target.value.trim()):r({...a,email:!0})}}),!a.email&&e.jsx("span",{className:"text-xs text-red-500",children:"*Not a valid Email"})]}),e.jsxs(g,{title:"Password field is required",htmlFor:"password",className:"grid",children:["Password *",e.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[e.jsx(c,{placeholder:"Enter Your Password",type:n?"text":"password",value:s.password,name:"password",autoComplete:"new-password",required:!0,className:"text-sm md:text-md",onChange:t=>{i({...s,password:t.target.value.trim()}),t.target.value.trim()!=""?f(t.target.value.trim()):r({...a,password:!0})}}),e.jsx(m,{onClick:()=>x(!n),type:"button",variant:"ghost",children:n?e.jsx(N,{}):e.jsx(b,{})})]}),!a.password&&e.jsx("span",{className:"text-xs text-red-500",children:"*Password must be atleast 8 character"})]}),e.jsxs(g,{title:"Confirm Password field is required",htmlFor:"confirmPassword",className:"grid",children:["Confirm Password *",e.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[e.jsx(c,{placeholder:"Re-enter Your Password",type:n?"text":"password",autoComplete:"new-password",value:s.confirmPassword,name:"confirmPassword",required:!0,className:"text-sm md:text-md",onChange:t=>{i({...s,confirmPassword:t.target.value.trim()}),t.target.value.trim()!=""?h(t.target.value.trim()):r({...a,confirmPassword:!0})}}),e.jsx(m,{onClick:()=>x(!n),type:"button",variant:"ghost",children:n?e.jsx(N,{}):e.jsx(b,{})})]}),!a.confirmPassword&&e.jsx("span",{className:"text-xs text-red-500",children:"*Password must same as above"})]}),e.jsx(m,{className:"mt-4 font-semibold",disabled:w,type:"submit",children:"Register"}),e.jsx(m,{variant:"link",type:"button",onClick:()=>o("login"),children:"Already have an Account?"}),e.jsx(L,{}),e.jsxs(m,{onClick:t=>{t.stopPropagation(),window.location.href="https://logisick.onrender.com/auth/google"},type:"button",className:"font-semibold",children:[e.jsx(E,{className:"ring-4 ring-white rounded-full bg-white"}),e.jsx("span",{children:"Register with Google account"})]})]})}function _(){const[o,s]=d.useState("login");return e.jsxs("div",{className:"w-full px-4 flex flex-col h-auto min-h-screen bg-ls-bg-200 dark:bg-ls-bg-dark-900",children:[e.jsx(z,{hide:{logo:!0,loginRegisterButton:!0}}),e.jsx(R,{small:!0}),e.jsx("div",{className:"grid p-4 place-items-center w-full",children:o==="login"?e.jsx(I,{setFormType:s}):e.jsx(G,{setFormType:s})})]})}export{_ as default};
