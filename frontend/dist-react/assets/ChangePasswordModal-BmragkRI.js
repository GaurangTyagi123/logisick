import{u as N,y as h,r as w,j as s}from"./index-OmV3yq9G.js";import{M as y}from"./Modal-DM6aciIk.js";import{u as b,B as i}from"./button-9vMW9_oR.js";import{C as q,a as F,b as E,c as S,d as k}from"./card-DDFRYrzS.js";import{C as M}from"./Close-C8HdlCrP.js";import{L as p}from"./label-DMqxW8Nh.js";import{I as f}from"./input-DYqCBqzr.js";import{E as x,a as P}from"./Authenticatepage-Db8545kt.js";import{u as L}from"./apiUser-C89hRQvH.js";import{u as Y}from"./Navbar-Bpyp0QFV.js";import"./separator-DYVVEmrN.js";import"./UserAvatar-D16AkYtt.js";function B(){const l=N(),{logoutFn:n}=Y("Please Login again"),{mutate:m,isPending:u}=b({mutationFn:L,onSuccess:()=>{h.success("Password changes successfully",{className:"toast"}),l.invalidateQueries({queryKey:["user"]}),n()},onError:r=>{h.error(r.message,{className:"toast"})}});return{updatePasswordFn:m,isPending:u}}function J({open:l,setOpen:n}){const{updatePasswordFn:m,isPending:u}=B(),[r,d]=w.useState({prevPassword:"",password:"",confirmPassword:""}),[a,t]=w.useState({prevPassword:!0,password:!0,confirmPassword:!0}),[o,c]=w.useState(!1),v=e=>{e.trim().length>=8?t({...a,prevPassword:!0}):t({...a,prevPassword:!1})},g=e=>{e.trim().length>=8?t({...a,password:!0}):t({...a,password:!1})},j=e=>{e.trim()===r.password.trim()?t({...a,confirmPassword:!0}):t({...a,confirmPassword:!1})};function C(){r.prevPassword.trim()!=""&&r.password.trim()!=""&&r.password.length>=8&&r.confirmPassword===r.password?m(r):(h.error("All fields are required",{className:"toast"}),d({confirmPassword:"",password:"",prevPassword:""}))}return s.jsx(y,{openModal:l,children:s.jsxs(q,{className:"max-w-screen",children:[s.jsxs(F,{className:"flex justify-between items-center",children:[s.jsx(E,{children:"Change Password"}),s.jsx(i,{onClick:()=>n(!1),variant:"secondary",children:s.jsx(M,{})})]}),s.jsxs(S,{className:"grid gap-2",children:[s.jsxs(p,{title:"Previous Password field is required",htmlFor:"prevpassword",className:"grid",children:["Previous Password *",s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[s.jsx(f,{placeholder:"Enter Your Previous Password",type:o?"text":"password",value:r.prevPassword,name:"prevpassword",required:!0,className:"text-sm md:text-md",onChange:e=>{d({...r,prevPassword:e.target.value.trim()}),e.target.value.trim()!=""?v(e.target.value.trim()):t({...a,prevPassword:!0})}}),s.jsx(i,{onClick:()=>c(!o),type:"button",variant:"ghost",children:o?s.jsx(x,{}):s.jsx(P,{})})]}),!a.prevPassword&&s.jsx("span",{className:"text-xs text-red-500",children:"*Previous Password must be atleast 8 character"})]}),s.jsxs(p,{title:"New Password field is required",htmlFor:"newpassword",className:"grid",children:["New Password *",s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[s.jsx(f,{placeholder:"Enter Your New Password",type:o?"text":"password",value:r.password,name:"newpassword",required:!0,className:"text-sm md:text-md",onChange:e=>{d({...r,password:e.target.value.trim()}),e.target.value.trim()!=""?g(e.target.value.trim()):t({...a,password:!0})}}),s.jsx(i,{onClick:()=>c(!o),type:"button",variant:"ghost",children:o?s.jsx(x,{}):s.jsx(P,{})})]}),!a.password&&s.jsx("span",{className:"text-xs text-red-500",children:"*Password must be atleast 8 character"})]}),s.jsxs(p,{title:"Confirm Password field is required",htmlFor:"confirmPassword",className:"grid",children:["Confirm Password *",s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[s.jsx(f,{placeholder:"Re-enter Your Password",type:o?"text":"password",value:r.confirmPassword,name:"confirmPassword",required:!0,className:"text-sm md:text-md",onChange:e=>{d({...r,confirmPassword:e.target.value.trim()}),e.target.value.trim()!=""?j(e.target.value.trim()):t({...a,confirmPassword:!0})}}),s.jsx(i,{onClick:()=>c(!o),type:"button",variant:"ghost",children:o?s.jsx(x,{}):s.jsx(P,{})})]}),!a.confirmPassword&&s.jsx("span",{className:"text-xs text-red-500",children:"*Password must same as above"})]})]}),s.jsx(k,{children:s.jsx(i,{className:"w-full",type:"submit",onClick:C,disabled:u,children:"Submit"})})]})})}export{J as default};
