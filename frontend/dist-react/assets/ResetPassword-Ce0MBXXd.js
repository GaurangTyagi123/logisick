import{c as b,u as P,k as y,y as m,a as C,r as d,j as s}from"./index-BTqsFGzI.js";import{N as E}from"./Navbar-CCS44x7q.js";import{b as R}from"./Typography-SW8h9KUc.js";import{L as p}from"./label-C4ZKI0uH.js";import{I as x}from"./input-DmIDtVMO.js";import{u as k,B as u}from"./button-Bi1CbZ-Y.js";import{E as g,a as h}from"./Authenticatepage-wIJ5G5bO.js";import"./UserAvatar-BSqINoZW.js";import"./separator-DGwrj2LX.js";function q(){const o=b(),l=P(),{mutate:c,isPending:r}=k({mutationFn:t=>y(t.resetToken,t.form),onSuccess:t=>{t?(m.success("Password reset successfully",{className:"toast"}),o.setQueryData(["user"],t),l("/")):(m.error("Error updating the password"),l("/authenticate"))},onError:t=>{m.error(t.message,{className:"toast"})}});return{resetPasswordFn:c,isResettingPassword:r}}function Y(){const o=C().resetToken,{resetPasswordFn:l,isResettingPassword:c}=q(),[r,t]=d.useState({password:"",confirmPassword:""}),[a,i]=d.useState({password:!0,confirmPassword:!0}),[n,w]=d.useState(!1),f=P(),j=e=>{e.trim().length>=8?i({...a,password:!0}):i({...a,password:!1})},v=e=>{e.trim().length>=8&&e.trim()===r.password.trim()?i({...a,confirmPassword:!0}):i({...a,confirmPassword:!1})},N=e=>{e.preventDefault(),r.password.trim().length===0||r.confirmPassword.trim().length===0||r.password!==r.confirmPassword||!o?m.error("All fields are required",{className:"toast"}):l({resetToken:o,form:r})};return d.useEffect(()=>{o.trim()||f("/")},[o,f]),s.jsxs("div",{className:"w-full px-4 flex flex-col h-auto min-h-screen bg-ls-bg-200 dark:bg-ls-bg-dark-900",children:[s.jsx(E,{hide:{userButton:!0,loginRegisterButton:!0}}),s.jsx("div",{className:"grid p-4 place-items-center",children:s.jsxs("form",{onSubmit:N,className:"flex flex-col flex-1 max-w-2xl gap-4 p-4 border min-w-lg rounded-2xl shadow-2xl",style:{maxWidth:"calc(100% - 2rem)"},children:[s.jsx(R,{className:"mb-2 text-center",children:"Reset Password"}),s.jsxs(p,{title:"New Password field is required",htmlFor:"newpassword",className:"grid",children:["New Password *",s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[s.jsx(x,{placeholder:"Enter Your New Password",type:n?"text":"password",value:r.password,name:"newpassword",required:!0,onChange:e=>{t({...r,password:e.target.value.trim()}),e.target.value.trim()!=""?j(e.target.value.trim()):i({...a,password:!0})}}),s.jsx(u,{onClick:()=>w(!n),type:"button",variant:"ghost",children:n?s.jsx(g,{}):s.jsx(h,{})})]}),!a.password&&s.jsx("span",{className:"text-xs text-red-500",children:"*Password must be atleast 8 character"})]}),s.jsxs(p,{title:"Confirm password field is required",htmlFor:"confpassword",className:"grid",children:["Confirm New Password *",s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[s.jsx(x,{placeholder:"Re-enter Your Password",type:n?"text":"password",value:r.confirmPassword,name:"confpassword",required:!0,onChange:e=>{t({...r,confirmPassword:e.target.value.trim()}),e.target.value.trim()!=""?v(e.target.value.trim()):i({...a,confirmPassword:!0})}}),s.jsx(u,{onClick:()=>w(!n),type:"button",variant:"ghost",children:n?s.jsx(g,{}):s.jsx(h,{})})]}),!a.confirmPassword&&s.jsx("span",{className:"text-xs text-red-500",children:"*Password must be same as above"})]}),s.jsx(u,{type:"submit",disabled:c,children:"Reset Password"})]})})]})}export{Y as default};
