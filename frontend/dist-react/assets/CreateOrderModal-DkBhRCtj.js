import{c as y,b as h,r as C,j as e,y as n}from"./index-wf-tjCCz.js";import{C as j}from"./Close-CF-osNUi.js";import{M as O}from"./Modal-iqcfqeyR.js";import{B as o}from"./button-EG1lfJG5.js";import{C as q,a as N,d as b,b as w,c as I}from"./card-D-GtwW-r.js";import{I as l}from"./input-DktSRuev.js";import{L as u}from"./label-ByPLIqZS.js";import{g as v}from"./apiOrg-UDa7ZxcE.js";import"./separator-CrRW6nuX.js";function B({open:c,setOpen:s,orderdata:r,createOrderFn:x,isCreatingOrder:f}){const{orgSlug:d}=y(),{data:m,isPending:p}=h({queryKey:[`org-${d}`],queryFn:()=>v(d)}),[t,i]=C.useState({quantity:1,orderedOn:new Date}),g=()=>{if(t.quantity<0||t.quantity>r.itemAmount)return n.error("Order quantity can't be out of item's amount range",{className:"toast"});if(t.orderedOn>new Date)return n.error("Can't place order in future",{className:"toast"});if(m?._id.trim()==="")return n.error("Organization can't be identified",{className:"toast"});if(r.itemId.trim()==="")return n.error("Item can't be identified",{className:"toast"});x({...t,organizationId:m?._id,itemId:r.itemId}),i({orderedOn:new Date,quantity:1}),s(!1)};return e.jsx(O,{openModal:c,children:e.jsxs(q,{className:"w-md max-w-11/12",children:[e.jsxs(N,{className:"flex justify-between items-center",children:[e.jsxs(b,{children:["Create new order for ",r.itemName]}),e.jsx(o,{onClick:()=>s(!1),variant:"secondary",children:e.jsx(j,{})})]}),e.jsxs(w,{className:"grid gap-2 max-h-80 overflow-auto sm:px-1",children:[e.jsxs(u,{htmlFor:"quantity",className:"grid",children:[e.jsx("span",{children:"Quantity *"}),e.jsx(l,{id:"quantity",name:"quantity",type:"number",onFocus:a=>a.target.select(),value:t.quantity,className:"text-sm md:text-md",min:1,max:r.itemAmount,onChange:a=>i({...t,quantity:Number(a.target.value)}),placeholder:"Enter item quantity",required:!0})]}),e.jsxs(u,{htmlFor:"Ordered On",className:"grid",children:[e.jsx("span",{children:"Ordered On *"}),e.jsx(l,{id:"orderedon",name:"orderedOn",type:"date",value:t.orderedOn.toISOString().split("T")[0],max:t.orderedOn.toISOString().split("T")[0],onChange:a=>{i({...t,orderedOn:new Date(a.target.valueAsDate||t.orderedOn)})},placeholder:"Enter item's order date",className:"w-full text-sm md:text-md",required:!0})]})]}),e.jsxs(I,{className:"flex gap-2",children:[e.jsx(o,{type:"button",onClick:()=>s(!1),variant:"secondary",children:"Cancel"}),e.jsx(o,{type:"button",onClick:g,disabled:f||p,children:"Create Order"})]})]})})}export{B as default};
