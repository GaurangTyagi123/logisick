import{r as l,j as e,y as h}from"./index-H5JN5wYo.js";import{C as x}from"./Close-DYe8Ue7o.js";import{M as y}from"./Modal-DKz5Ep2_.js";import{B as a}from"./button-BKGA3V9u.js";import{C as j,a as f,d as O,b as q,c as g}from"./card-gZVURdSA.js";import{I as m}from"./input-3C9xSQ2x.js";import{L as o}from"./label-38rcBngi.js";import"./Typography-B3Ue9uXG.js";import"./separator-BvH7fElG.js";function F({open:n,setOpen:i,orderData:s,updateOrderFn:p,isUpdatingOrder:c}){const[t,r]=l.useState({quantity:s.quantity,shipped:s.shipped,orderedOn:s.orderedOn}),u=()=>{if(console.log("onsubmit order data : ",s),console.log("onsubmit update data: ",t),t.quantity<0||t.quantity>s.item.quantity)return h.error("Order quantity can't be out of item's amount range",{className:"toast"});p({orderId:s._id,orderUpdated:{orderedOn:t.orderedOn,quantity:t.quantity,shipped:t.shipped}})};return l.useEffect(()=>{n&&r({quantity:s.quantity,shipped:s.shipped,orderedOn:s.orderedOn})},[n,s.quantity,s.shipped,s.orderedOn]),e.jsx(y,{openModal:n,children:e.jsxs(j,{className:"w-md max-w-11/12",children:[e.jsxs(f,{className:"flex justify-between items-center",children:[e.jsxs(O,{children:["Update order"," ",s.orderName?s.orderName:"Order"]}),e.jsx(a,{onClick:()=>i(!1),variant:"secondary",children:e.jsx(x,{})})]}),e.jsxs(q,{className:"grid gap-2 max-h-80 overflow-auto sm:px-1",children:[e.jsxs(o,{htmlFor:"quantity",className:"grid",children:[e.jsx("span",{children:"Quantity"}),e.jsx(m,{id:"quantity",name:"quantity",type:"number",onFocus:d=>d.target.select(),value:t.quantity,className:"text-sm md:text-md",min:1,max:s.item.quantity,onChange:d=>r({...t,quantity:Number(d.target.value)}),placeholder:"Update item quantity",required:!0})]}),e.jsxs(o,{htmlFor:"Ordered On",className:"grid",children:[e.jsx("span",{children:"Ordered On"}),e.jsx(m,{id:"orderedon",name:"orderedOn",type:"date",value:new Date(t.orderedOn).toISOString().split("T")[0],max:new Date().toISOString().split("T")[0],onChange:d=>{r({...t,orderedOn:new Date(d.target.valueAsDate||t.orderedOn)})},placeholder:"Enter item's order date",className:"w-full text-sm md:text-md",required:!0})]}),e.jsxs(o,{htmlFor:"isshipped",className:"grid",children:[e.jsx("span",{children:"Is Shipped"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[e.jsx(a,{variant:t.shipped?"outline":"secondary",onClick:()=>r({...t,shipped:!1}),className:"sm:rounded-r-none",children:"Under Process"}),e.jsx(a,{variant:t.shipped?"secondary":"outline",onClick:()=>r({...t,shipped:!0}),className:"sm:rounded-l-none",children:"Shipped"})]})]})]}),e.jsxs(g,{className:"flex gap-2",children:[e.jsx(a,{onClick:()=>i(!1),variant:"secondary",children:"Cancel"}),e.jsx(a,{type:"button",onClick:()=>{u(),i(!1)},disabled:c,children:"Update Order"})]})]})})}export{F as default};
