import{c as u,u as l,y as i,a as d,f as m,r as p,j as s,g}from"./index-BTqsFGzI.js";import{B as f}from"./BigHeading-DcWtrW8t.js";import{u as v,B as x}from"./button-Bi1CbZ-Y.js";import{a as h}from"./Typography-SW8h9KUc.js";import{b as I}from"./apiEmp-DUTvpoAC.js";function j(){const a=u(),n=l(),{mutate:r,isPending:t}=v({mutationFn:({token:e})=>I(e),onSuccess:e=>{a.invalidateQueries({predicate:c=>c.queryKey[0]?.toString()==="emps"}),i.success("Invite Accepted",{className:"toast"}),n("/dashboard")},onError:e=>{i.error(e.message,{className:"toast"})}});return{acceptInvitation:r,isAcceptingInvite:t}}function C(){const{token:a}=d(),{acceptInvitation:n,isAcceptingInvite:r}=j(),{user:t,isCheckingAuth:e}=m(),c=()=>{a?n({token:a}):i.error("No invitation token found",{className:"toast"})};return p.useEffect(()=>{let o;return t||(o=i.error("Login/Register first to accept invitatation",{className:"toast"})),()=>i.dismiss(o)},[t]),e?s.jsx(g,{fullscreen:!0}):s.jsxs("div",{className:"h-dvh bg-ls-bg-300 dark:bg-ls-bg-dark-800 flex flex-col justify-center items-center",children:[s.jsx(f,{center:!0}),s.jsx("div",{className:"max-w-lg p-2 grid",children:t?s.jsx(x,{disabled:r||!t,onClick:c,children:"Accept Invitation"}):s.jsx(h,{children:"Login/Register first to accept invitatation"})})]})}export{C as default};
