const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OtpModal-vmPtdGsc.js","assets/index-wf-tjCCz.js","assets/index-4ul3zOFW.css","assets/Modal-iqcfqeyR.js","assets/card-D-GtwW-r.js","assets/button-EG1lfJG5.js","assets/Close-CF-osNUi.js","assets/Profilepage-C6eZmcBL.js","assets/Navbar-DIURD7wT.js","assets/UserAvatar-DyHkQFew.js","assets/separator-CrRW6nuX.js","assets/skeleton-B4h73-BI.js","assets/badge-CICYpLaW.js","assets/useGetOrganizations-R4pfdm2s.js","assets/apiOrg-UDa7ZxcE.js","assets/DeleteMeModal-Ok0MpqOE.js","assets/input-DktSRuev.js","assets/label-ByPLIqZS.js","assets/ChangePasswordModal-BX4eJDx9.js","assets/Authenticatepage-B24TteVy.js","assets/apiUser-DfjZS0zR.js","assets/ProfilePicChangeModal-DLcVLOue.js","assets/useUpdateUser-BEuvY9MK.js","assets/DeleteOrgModal-BfSJzHmK.js","assets/EditOrgModal-D7FK3YOJ.js","assets/index.esm-DfvpWMFY.js","assets/Select-DI_u4WjR.js","assets/index-BH-lDzbn.js","assets/Pagination-Dr5pjMs8.js","assets/TransferOwnershipModal-B7OIRDTS.js","assets/UpdateUserModal-DEQClC9v.js"])))=>i.map(i=>d[i]);
import{o as F,f as T,y as c,p as G,j as e,L as Q,d as Y,a as J,r as a,_ as d}from"./index-wf-tjCCz.js";import{S as $,a as K,E as P,T as W,D as M,V as X,H as Z}from"./Profilepage-C6eZmcBL.js";import{a as ee,B as m,S as se,b as ae,L as te,M as re}from"./button-EG1lfJG5.js";import{N as le}from"./Navbar-DIURD7wT.js";import{U as ie}from"./UserAvatar-DyHkQFew.js";import{C as ne,a as oe,d as ce,b as de}from"./card-D-GtwW-r.js";import{T as V,a as f,b as o,c as z,d as i,S as x,e as me}from"./skeleton-B4h73-BI.js";import{B as b}from"./badge-CICYpLaW.js";import{u as xe}from"./useGetOrganizations-R4pfdm2s.js";import{D as ue,a as fe,b as he,c as w,m as y}from"./separator-CrRW6nuX.js";function S(s,r){if(G(s)){const l=s.response?.data?.message||r;console.log(s),c.error(l,{className:"toast"})}else console.log(s)}const pe=F(s=>({isVerifingEmail:!1,isDeleteingUser:!1,verifyEmail:async r=>{try{s({isVerifingEmail:!0});const l=await T.post("/v1/auth/verifyEmail",r);if(l.data.data.message.toLowerCase().includes("already"))return s({isVerifingEmail:!1}),c.success(l.data.data.message,{className:"toast"}),"already";if(l.data.data.message.toLowerCase().includes("sent"))return s({isVerifingEmail:!1}),c.success(l.data.data.message,{className:"toast"}),"sent";if(l.data.data.message.toLowerCase().includes("successfully"))return s({isVerifingEmail:!1}),c.success(l.data.data.message,{className:"toast"}),"verified"}catch(l){S(l,"Error verifing email")}finally{s({isVerifingEmail:!1})}},deleteUser:async()=>{try{s({isDeleteingUser:!0}),await T.delete("/v1/users/updateMe"),c.success("User deleted successfully",{className:"toast"})}catch(r){S(r,"Error deleting user")}finally{s({isDeleteingUser:!1})}}}));function ge(){return e.jsxs(e.Fragment,{children:[e.jsx(V,{children:e.jsxs(f,{children:[e.jsx(o,{children:"Organization"}),e.jsx(o,{children:"Role"}),e.jsx(o,{children:"Subscription"}),e.jsx(o,{children:"Members"}),e.jsx(o,{children:"Type"})]})}),e.jsx(z,{children:[1,2,3,4,5].map((s,r)=>e.jsxs(f,{children:[e.jsx(i,{children:e.jsx(x,{className:"h-10"})}),e.jsx(i,{children:e.jsx(x,{className:"h-10"})}),e.jsx(i,{children:e.jsx(x,{className:"h-10"})}),e.jsx(i,{children:e.jsx(x,{className:"h-10"})}),e.jsx(i,{children:e.jsx(x,{className:"h-10"})})]},r))})]})}const je=s=>{switch(s){case"Pro":return"bg-violet-600 dark:bg-violet-500 text-primary-foreground";case"Basic":return"bg-yellow-600 dark:bg-yellow-500 text-primary-foreground";case"None":return"bg-secondary text-secondary-foreground";default:return"bg-muted text-muted-foreground"}};function be(s){switch(s){case"Owner":return"text-black bg-yellow-400 dark:text-black dark:bg-yellow-400";case"Admin":return"text-black bg-violet-400 dark:text-black dark:bg-violet-400";case"Manager":return"text-black bg-green-400 dark:text-black dark:bg-green-400";case"Staff":return"text-white bg-zinc-800 dark:text-black dark:bg-zinc-200";default:return"text-black bg-zinc-300 outline-1 dark:text-white dark:bg-zinc-800 "}}function we({setDeleteOpen:s,setEditOpen:r,setOpenTransfer:l}){const{data:h,isGettingOrganizations:t}=xe();return e.jsxs(ne,{className:"bg-white dark:bg-ls-bg-dark-800 h-96 w-full",children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Organizations"]})}),e.jsx(de,{className:"overflow-x-auto h-full",children:e.jsx(me,{children:t?e.jsx(ge,{}):h.length===0?e.jsxs("div",{className:"h-full w-full grid place-items-center gap-3",children:[e.jsx(ee,{children:"You are not in any organizations."}),e.jsx(m,{asChild:!0,children:e.jsx(Q,{to:"/dashboard",children:"Create/Join a Organization"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{children:e.jsxs(f,{children:[e.jsx(o,{children:"Organization"}),e.jsx(o,{children:"Role"}),e.jsx(o,{children:"Subscription"}),e.jsx(o,{children:"Members"}),e.jsx(o,{children:"Type"})]})}),e.jsx(z,{className:"max-h-96 overflow-y-scroll",children:h.map(n=>e.jsxs(f,{className:"hover:bg-muted/50",children:[e.jsx(i,{className:"font-medium",children:n.name}),e.jsx(i,{children:e.jsx(b,{variant:"outline",className:Y("font-medium",be("Owner")),children:n.role})}),e.jsx(i,{children:e.jsx(b,{className:je(n.subscription),children:n.subscription})}),e.jsxs(i,{className:"text-muted-foreground",children:[n?.totalEmployees??1," members"]}),e.jsx(i,{children:e.jsx(b,{variant:"outline",children:n.type})}),n.role.toLowerCase()==="owner"&&e.jsx(i,{className:"w-[5px]",children:e.jsxs(ue,{children:[e.jsx(fe,{children:e.jsx(K,{className:"w-5 h-5 outline rounded-sm cursor-pointer outline-offset-2"})}),e.jsxs(he,{className:"font-semibold bg-ls-bg-100 dark:bg-ls-bg-dark-800",children:[e.jsxs(w,{className:"cursor-pointer",onClick:()=>r(!0),children:[e.jsx(P,{}),"EDIT"]}),e.jsx(y,{}),e.jsxs(w,{className:"cursor-pointer",onClick:()=>l(!0),children:[e.jsx(W,{}),"TRANSFER"]}),e.jsx(y,{}),e.jsxs(w,{className:"cursor-pointer",onClick:()=>s(!0),children:[e.jsx(M,{className:"text-red-500"}),e.jsx(se,{className:"text-red-500",children:"DELETE"})]}),e.jsx(y,{})]})]})})]},n._id))})]})})})]})}const ye=a.lazy(()=>d(()=>import("./OtpModal-vmPtdGsc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),Ne=a.lazy(()=>d(()=>import("./DeleteMeModal-Ok0MpqOE.js"),__vite__mapDeps([15,1,2,3,4,5,6,16,17,10,7,8,9,11,12,13,14]))),ve=a.lazy(()=>d(()=>import("./ChangePasswordModal-BX4eJDx9.js"),__vite__mapDeps([18,1,2,3,5,4,6,17,10,16,19,20,8,9]))),_e=a.lazy(()=>d(()=>import("./ProfilePicChangeModal-DLcVLOue.js"),__vite__mapDeps([21,1,2,6,3,5,4,9,16,7,22,20,17,10]))),Ee=a.lazy(()=>d(()=>import("./DeleteOrgModal-BfSJzHmK.js"),__vite__mapDeps([23,1,2,3,4,5,6,16,17,10,14]))),Oe=a.lazy(()=>d(()=>import("./EditOrgModal-D7FK3YOJ.js"),__vite__mapDeps([24,1,2,3,4,5,6,25,17,10,16,26,27,28,14]))),ke=a.lazy(()=>d(()=>import("./TransferOwnershipModal-B7OIRDTS.js"),__vite__mapDeps([29,1,2,3,4,5,6,25,17,10,14,16]))),Ce=a.lazy(()=>d(()=>import("./UpdateUserModal-DEQClC9v.js"),__vite__mapDeps([30,1,2,3,5,4,6,17,10,16,22,20])));function De(){const{verifyEmail:s,isVerifingEmail:r}=pe(),t=J().getQueryData(["user"])?.user,[n,N]=a.useState(!1),[L,v]=a.useState(!1),[p,g]=a.useState(!1),[U,_]=a.useState(!1),[A,E]=a.useState(!1),[R,O]=a.useState(!1),[I,k]=a.useState(!1),[H,C]=a.useState(!1),[B,j]=a.useState(""),[q,D]=a.useState(t?.avatar||"");return a.useEffect(()=>{let u;return!t?.isVerified&&!p&&!r&&(u=c.warning(e.jsxs("div",{className:"grid h-auto",children:["Your Email is not verified",e.jsx(m,{variant:"default",disabled:r,onClick:async()=>{await s({})=="sent"&&(g(!0),j("")),c.dismiss(u)},children:"Click to Verify"})]}),{className:"toast"})),()=>c.dismiss(u)},[r,t?.isVerified,s,p]),e.jsxs("div",{className:"w-full px-4 h-auto min-h-screen flex flex-col gap-2 items-center relative bg-ls-bg-200 dark:bg-ls-bg-dark-900 pb-10",children:[e.jsx(le,{}),e.jsxs("div",{className:"max-w-6xl p-4 w-full grid place-items-center md:flex gap-4 rounded-2xl shadow-2xl bg-white dark:bg-ls-bg-dark-800",children:[e.jsxs("div",{className:"w-40 h-40 grid place-items-center relative",children:[e.jsx(ie,{customSeed:t?.avatar||t?.email,className:"w-40 h-40 ring-4 ring-offset-2 ring-ls-sec-500"}),e.jsx(m,{className:"absolute right-2 bottom-2 rounded-full",onClick:()=>{N(!0),D(t?.avatar||t?.email)},children:e.jsx(P,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col justify-between h-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex gap-2 flex-row justify-center md:justify-start items-center text-ls-ter-800 dark:text-ls-ter-500",children:[e.jsx(ae,{className:"pb-0",children:t?.name}),t?.isVerified?e.jsx(X,{}):e.jsx(m,{variant:"ghost",disabled:r,title:"verify your email",className:"grid place-items-center p-0",onClick:async()=>{await s({})=="sent"&&(g(!0),j(""))},children:e.jsx(Z,{className:"h-full w-full"})})]}),e.jsx(te,{className:"text-center md:text-start text-ls-sec-800 dark:text-ls-sec-400",children:t?.email})]}),e.jsxs(re,{className:"text-sm text-center md:text-start",children:["Member since :"," ",new Date(t?.createdAt??"").toLocaleDateString()]})]})]}),e.jsxs("main",{className:"max-w-6xl w-full flex flex-col-reverse md:flex-row gap-2 ",children:[e.jsx(we,{setDeleteOpen:O,setEditOpen:k,setOpenTransfer:C}),e.jsxs("div",{className:"md:min-h-96 gap-2 grid  md:flex md:flex-col",children:[e.jsx(m,{onClick:()=>{t?.isVerified?v(!0):c.error("User must be verified to update information",{className:"toast"})},variant:"secondary",children:"Update User"}),e.jsx(m,{onClick:()=>_(!0),variant:"secondary",children:"Change Password"}),e.jsxs(m,{variant:"destructive",onClick:()=>E(!0),children:[e.jsx(M,{className:"h-full aspect-square"}),"Delete Me"]})]})]}),e.jsx(_e,{open:n,setOpen:N,modalPic:q,setModalPic:D}),e.jsx(ye,{open:p,setOpen:g,otp:B,setOtp:j}),e.jsx(ve,{open:U,setOpen:_}),e.jsx(Oe,{setOpen:k,open:I}),e.jsx(ke,{open:H,setOpen:C}),e.jsx(Ne,{open:A,setOpen:E}),e.jsx(Ee,{open:R,setOpen:O,orgId:t?.myOrg?._id}),e.jsx(Ce,{open:L,setOpen:v})]})}const He=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"}));export{He as P,pe as u};
