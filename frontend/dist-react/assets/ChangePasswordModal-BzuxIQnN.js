import{a as N,y as g,r as w,j as s}from"./index-DGdq0UJg.js";import{M as y}from"./Modal-DKjyBxId.js";import{u as b,B as d}from"./button-BJYD--B9.js";import{C as q,a as F,d as E,b as S,c as k}from"./card-DED02hlv.js";import{C as L}from"./Close-B_kHsTBg.js";import{L as p}from"./label-DsFwhH02.js";import{I as f}from"./input-BQR0Vhqq.js";import{E as x,a as P}from"./Authenticatepage-BFr6-eM3.js";import{u as M}from"./apiUser-DthCtj5r.js";import{u as U}from"./Navbar-vJQGtm-N.js";import"./separator-DZ5S64f-.js";import"./UserAvatar-8Gg3wf1Y.js";function Y(){const l=N(),{logoutFn:n,isLoggingOut:m}=U("Please Login again"),{mutate:u,isPending:r}=b({mutationFn:M,onSuccess:()=>{g.success("Password changes successfully",{className:"toast"}),l.invalidateQueries({queryKey:["user"]}),n()},onError:i=>{g.error(i.message,{className:"toast"})}});return{updatePasswordFn:u,isUpdatingPassword:r||m}}function G({open:l,setOpen:n}){const{updatePasswordFn:m,isUpdatingPassword:u}=Y(),[r,i]=w.useState({prevPassword:"",password:"",confirmPassword:""}),[a,t]=w.useState({prevPassword:!0,password:!0,confirmPassword:!0}),[o,c]=w.useState(!1),v=e=>{e.trim().length>=8?t({...a,prevPassword:!0}):t({...a,prevPassword:!1})},h=e=>{e.trim().length>=8?t({...a,password:!0}):t({...a,password:!1})},j=e=>{e.trim()===r.password.trim()?t({...a,confirmPassword:!0}):t({...a,confirmPassword:!1})};function C(){r.prevPassword.trim()!=""&&r.password.trim()!=""&&r.password.length>=8&&r.confirmPassword===r.password?m(r):(g.error("All fields are required",{className:"toast"}),i({confirmPassword:"",password:"",prevPassword:""}))}return s.jsx(y,{openModal:l,children:s.jsxs(q,{className:"w-md max-w-11/12",children:[s.jsxs(F,{className:"flex justify-between items-center",children:[s.jsx(E,{children:"Change Password"}),s.jsx(d,{onClick:()=>n(!1),variant:"secondary",children:s.jsx(L,{})})]}),s.jsxs(S,{className:"grid gap-2",children:[s.jsxs(p,{title:"Previous Password field is required",htmlFor:"prevpassword",className:"grid",children:["Previous Password *",s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[s.jsx(f,{placeholder:"Enter Your Previous Password",type:o?"text":"password",value:r.prevPassword,name:"prevpassword",required:!0,className:"text-sm md:text-md",onChange:e=>{i({...r,prevPassword:e.target.value.trim()}),e.target.value.trim()!=""?v(e.target.value.trim()):t({...a,prevPassword:!0})}}),s.jsx(d,{onClick:()=>c(!o),type:"button",variant:"ghost",children:o?s.jsx(x,{}):s.jsx(P,{})})]}),!a.prevPassword&&s.jsx("span",{className:"text-xs text-red-500",children:"*Previous Password must be atleast 8 character"})]}),s.jsxs(p,{title:"New Password field is required",htmlFor:"newpassword",className:"grid",children:["New Password *",s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[s.jsx(f,{placeholder:"Enter Your New Password",type:o?"text":"password",value:r.password,name:"newpassword",required:!0,className:"text-sm md:text-md",onChange:e=>{i({...r,password:e.target.value.trim()}),e.target.value.trim()!=""?h(e.target.value.trim()):t({...a,password:!0})}}),s.jsx(d,{onClick:()=>c(!o),type:"button",variant:"ghost",children:o?s.jsx(x,{}):s.jsx(P,{})})]}),!a.password&&s.jsx("span",{className:"text-xs text-red-500",children:"*Password must be atleast 8 character"})]}),s.jsxs(p,{title:"Confirm Password field is required",htmlFor:"confirmPassword",className:"grid",children:["Confirm Password *",s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[s.jsx(f,{placeholder:"Re-enter Your Password",type:o?"text":"password",value:r.confirmPassword,name:"confirmPassword",required:!0,className:"text-sm md:text-md",onChange:e=>{i({...r,confirmPassword:e.target.value.trim()}),e.target.value.trim()!=""?j(e.target.value.trim()):t({...a,confirmPassword:!0})}}),s.jsx(d,{onClick:()=>c(!o),type:"button",variant:"ghost",children:o?s.jsx(x,{}):s.jsx(P,{})})]}),!a.confirmPassword&&s.jsx("span",{className:"text-xs text-red-500",children:"*Password must same as above"})]})]}),s.jsx(k,{children:s.jsx(d,{className:"w-full",type:"submit",onClick:C,disabled:u,children:"Submit"})})]})})}export{G as default};
