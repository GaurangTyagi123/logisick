import{r as t,j as e,y as R,c as A,b as G,L as I}from"./index-D2pWsFwA.js";import{u as M}from"./useGetEmployees-CMtt8APy.js";import{u as O,b as j,S as b,M as B,B as T}from"./button-CHgQs-HN.js";import{s as z,g as Z}from"./apiOrg-BafY1MYC.js";import{U as F}from"./UserAvatar-CZB3-UBW.js";import{l as L,C as E,a as U}from"./CustomTableSkeleton-CIbr3OOE.js";import{B as w}from"./badge-DfQMayD6.js";import{f as N}from"./utilfn-VpFqLrdN.js";import{S as i}from"./skeleton-EBtLC5do.js";import"./card-Dn0_vEQo.js";import"./input-D6dxfwAL.js";import"./separator-Qx3zLuA7.js";import"./Pagination-T_FZ3-lF.js";function y(a){return a?.map(s=>({role:s?.data?.role,...s?.data?.employees}))||[]}function _({orgid:a}){const[c,S]=t.useState(1),[u,v]=t.useState(1),{data:k,count:m,isGettingEmployees:d,error:p}=M(a,u),[x,f]=t.useState(null),{mutate:h}=O({mutationFn:z,onSettled:r=>{if(r)f(y(r.employees.map(l=>({data:l}))));else return}}),n=t.useRef(null),g=t.useCallback(async r=>{n.current&&n.current.abort();const l=new AbortController;n.current=l,r.length&&h({orgid:a,query:r.trim(),controller:l})},[a,h]),o=t.useMemo(()=>L.debounce(g,500),[g]),C=t.useCallback(r=>{if(r.trim()===""){o.cancel(),f(null),n.current&&n.current.abort();return}o(r)},[o]);if(t.useEffect(()=>{d||S(m>5?Math.ceil(m/5):1)},[m,d]),t.useEffect(()=>()=>{o.cancel(),n.current?.abort()},[o]),d)return e.jsx(E,{});if(p){R.error(p.message,{className:"toast"});return}const P=y(k);return e.jsx(U,{title:"Employees",columns:[{key:"name",header:"Name",render:(r,l)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(F,{className:"w-10 h-10",customSeed:l.avatar}),e.jsx("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:l?.name})]})},{key:"email",header:"Email"},{key:"role",header:"Role"}],clientSide:!0,data:x||P,currentPage:u,totalPages:c,setPage:v,onSearch:C})}function re(){const{orgSlug:a}=A(),{data:s,isPending:c}=G({queryKey:[`org-${a}`],queryFn:()=>Z(a)});return c?e.jsxs("div",{className:"flex flex-col gap-2  items-baseline h-full w-autorounded-2xl bg-ls-bg-300 dark:bg-ls-bg-dark-800",children:[e.jsxs("div",{className:"bg-white dark:bg-ls-bg-dark-800 outline-1 w-full p-3 rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center w-full",children:[e.jsx(i,{className:"w-1/3 h-10"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{className:"h-18 w-18"}),e.jsx(i,{className:"h-18 w-18"})]})]}),e.jsx(i,{className:"w-1/2 h-5"})]}),e.jsx(E,{})]}):s?e.jsxs("div",{className:"grid gap-2 jet-brains rounded-2xl bg-ls-bg-300 dark:bg-ls-bg-dark-800",children:[e.jsxs("div",{className:"bg-white dark:bg-ls-bg-dark-800 outline-1 w-full p-3 rounded-lg md:rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center w-full",children:[e.jsx(j,{className:"overflow-hidden text-ellipsis whitespace-nowrap w-full text-center md:text-start",children:s.name}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(b,{className:"grid place-items-center gap-2 h-full p-2",children:["Imports",e.jsx(w,{className:"p-2",children:N(5e5,"INR")})]}),e.jsxs(b,{className:"grid place-items-center gap-2 h-full p-2",children:["Exports",e.jsx(w,{className:"p-2",children:N(5e5,"INR")})]})]})]}),e.jsx(B,{className:"line-clamp-2 md:text-start text-center",children:s.description})]}),s?e.jsx(_,{orgid:s?._id}):e.jsxs("div",{className:"h-96 w-full flex flex-col justify-center items-center gap-3 outline-1",children:[e.jsx(j,{children:"Your Organization doesn't have any employees"}),e.jsx(T,{asChild:!0,children:e.jsx(I,{to:"user-role",children:"Add Employees"})})]})]}):e.jsx("p",{children:"Create your own organiztion"})}export{re as default};
