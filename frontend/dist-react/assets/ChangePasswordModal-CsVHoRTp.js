import{u as y,y as h,r as w,j as s}from"./index-CErwBKge.js";import{M as N}from"./Modal-B-0FCMEA.js";import{u as b,B as i}from"./button-uu-p-XM3.js";import{C as q,a as F,b as E,c as S,d as k}from"./card-jGDpro_n.js";import{C as M}from"./Close-BUWIRoM6.js";import{L as p}from"./label-DpyTasSs.js";import{I as f}from"./input-DeEbCafh.js";import{E as P,a as x}from"./Authenticatepage-SuS4FgD0.js";import{u as L}from"./apiUser-vF-7H-lG.js";import{u as Y}from"./Navbar-C0EQpfeG.js";import"./dropdown-menu-DJmDHdtQ.js";import"./UserAvatar-iC60342Q.js";function B(){const n=y(),{logoutFn:l}=Y("Please Login again"),{mutate:m,isPending:u}=b({mutationFn:L,onSuccess:()=>{h.success("Password changes successfully",{className:"toast"}),n.invalidateQueries({queryKey:["user"]}),l()},onError:r=>{h.error(r.message,{className:"toast"})}});return{updatePasswordFn:m,isPending:u}}function J({open:n,setOpen:l}){const{updatePasswordFn:m,isPending:u}=B(),[r,d]=w.useState({prevPassword:"",password:"",confirmPassword:""}),[a,t]=w.useState({prevPassword:!0,password:!0,confirmPassword:!0}),[o,c]=w.useState(!1),v=e=>{e.trim().length>=8?t({...a,prevPassword:!0}):t({...a,prevPassword:!1})},g=e=>{e.trim().length>=8?t({...a,password:!0}):t({...a,password:!1})},j=e=>{e.trim()===r.password.trim()?t({...a,confirmPassword:!0}):t({...a,confirmPassword:!1})};function C(){r.prevPassword.trim()!=""&&r.password.trim()!=""&&r.password.length>=8&&r.confirmPassword===r.password?m(r):(h.error("All fields are required",{className:"toast"}),d({confirmPassword:"",password:"",prevPassword:""}))}return s.jsx(N,{openModal:n,children:s.jsxs(q,{className:"min-w-md",children:[s.jsxs(F,{className:"flex justify-between items-center",children:[s.jsx(E,{children:"Change Password"}),s.jsx(i,{onClick:()=>l(!1),variant:"secondary",children:s.jsx(M,{})})]}),s.jsxs(S,{className:"grid gap-2",children:[s.jsxs(p,{title:"Previous Password field is required",htmlFor:"prevpassword",className:"grid",children:["Previous Password *",s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[s.jsx(f,{placeholder:"Enter Your Previous Password",type:o?"text":"password",value:r.prevPassword,name:"prevpassword",required:!0,onChange:e=>{d({...r,prevPassword:e.target.value.trim()}),e.target.value.trim()!=""?v(e.target.value.trim()):t({...a,prevPassword:!0})}}),s.jsx(i,{onClick:()=>c(!o),type:"button",variant:"ghost",children:o?s.jsx(P,{}):s.jsx(x,{})})]}),!a.prevPassword&&s.jsx("span",{className:"text-xs text-red-500",children:"*Previous Password must be atleast 8 character"})]}),s.jsxs(p,{title:"New Password field is required",htmlFor:"newpassword",className:"grid",children:["New Password *",s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[s.jsx(f,{placeholder:"Enter Your New Password",type:o?"text":"password",value:r.password,name:"newpassword",required:!0,onChange:e=>{d({...r,password:e.target.value.trim()}),e.target.value.trim()!=""?g(e.target.value.trim()):t({...a,password:!0})}}),s.jsx(i,{onClick:()=>c(!o),type:"button",variant:"ghost",children:o?s.jsx(P,{}):s.jsx(x,{})})]}),!a.password&&s.jsx("span",{className:"text-xs text-red-500",children:"*Password must be atleast 8 character"})]}),s.jsxs(p,{title:"Confirm Password field is required",htmlFor:"confirmPassword",className:"grid",children:["Confirm Password *",s.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[s.jsx(f,{placeholder:"Re-enter Your Password",type:o?"text":"password",value:r.confirmPassword,name:"confirmPassword",required:!0,onChange:e=>{d({...r,confirmPassword:e.target.value.trim()}),e.target.value.trim()!=""?j(e.target.value.trim()):t({...a,confirmPassword:!0})}}),s.jsx(i,{onClick:()=>c(!o),type:"button",variant:"ghost",children:o?s.jsx(P,{}):s.jsx(x,{})})]}),!a.confirmPassword&&s.jsx("span",{className:"text-xs text-red-500",children:"*Password must same as above"})]})]}),s.jsx(k,{children:s.jsx(i,{className:"w-full",type:"submit",onClick:C,disabled:u,children:"Submit"})})]})})}export{J as default};
