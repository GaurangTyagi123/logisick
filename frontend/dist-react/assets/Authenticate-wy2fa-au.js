import{u as F,e as E,m as R,y as c,s as A,n as L,r as d,j as e}from"./index-DLpN21qu.js";import{B as $}from"./BigHeading-RgsTEVaQ.js";import{u as C,d as z,B as m}from"./button-DdnwTV88.js";import{I as u}from"./input-CsrT0UDB.js";import{L as g}from"./label-DnP0gUPp.js";import{S as Y}from"./dropdown-menu-Bvxii03f.js";import{E as P,a as y,G as k}from"./Authenticatepage-oFlg3uaw.js";import{N as Z}from"./Navbar-rbu8Ocl0.js";import"./UserAvatar-Cr1zkuZg.js";function B(){const l=F(),s=E(),{mutate:i,isPending:a}=C({mutationFn:R,onSuccess:()=>{c.success("LoggedIn Successfully",{className:"toast"}),l.invalidateQueries({queryKey:["user"]}),s("/")},onError:r=>{c.error(r.message,{className:"toast"})}});return{loginFn:i,isPending:a}}function G(){const{mutate:l,isPending:s}=C({mutationFn:A,onSuccess:i=>{c.success(i?.message,{className:"toast"})},onError:i=>{c.error(i.message,{className:"toast"})}});return{sendForgotPassword:l,isPending:s}}function I(){const l=F(),s=E(),{mutate:i,isPending:a}=C({mutationFn:L,onSuccess:()=>{c.success("Sign up successfull",{className:"toast"}),l.invalidateQueries({queryKey:["user"]}),s("/")},onError:r=>{c.error(r.message,{className:"toast"})}});return{signupFn:i,isPending:a}}function V({setFormType:l}){const[s,i]=d.useState({email:"",password:""}),[a,r]=d.useState({email:!0,password:!0}),[n,x]=d.useState(!1),{sendForgotPassword:f,isPending:h}=G(),{loginFn:v,isPending:j}=B(),N=o=>{o.trim().length>=8?r({...a,password:!0}):r({...a,password:!1})};function b(o){r({...a,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(o)})}const t=o=>{o.preventDefault(),s.email.trim()!==""&&s.password.length>=8&&v(s)},p=()=>{if(s.email.trim().length==0&&a.email){c.error("Email is required to reset password",{className:"toast"});return}else f({email:s.email})};return e.jsxs("form",{onSubmit:t,className:"bg-ls-bg-100 dark:bg-ls-bg-dark-800 flex flex-col max-w-2xl gap-4 p-4 border md:min-w-lg rounded-2xl shadow-2xl",style:{maxWidth:"calc(100% - 2rem)"},children:[e.jsx(z,{className:"mb-2 text-center",children:"Login User"}),e.jsxs(g,{title:"Email field is required",htmlFor:"email",className:"grid",children:["Email *",e.jsx(u,{placeholder:"Enter Your Email",type:"email",autoComplete:"work email",value:s.email,name:"email",required:!0,className:"text-sm md:text-md",onChange:o=>{i({...s,email:o.target.value.trim()}),o.target.value.trim()!=""?b(o.target.value.trim()):r({...a,email:!0})}}),!a.email&&e.jsx("span",{className:"text-xs text-red-500",children:"*Not a valid Email"})]}),e.jsxs(g,{title:"Password field is required",htmlFor:"password",className:"grid",children:["Password *",e.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[e.jsx(u,{placeholder:"Enter Your Password",type:n?"text":"password",value:s.password,name:"password",required:!0,autoComplete:"current-password",className:"text-sm md:text-md",onChange:o=>{i({...s,password:o.target.value.trim()}),o.target.value.trim()!=""?N(o.target.value.trim()):r({...a,password:!0})}}),e.jsx(m,{onClick:()=>x(!n),type:"button",variant:"ghost",children:n?e.jsx(P,{}):e.jsx(y,{})})]}),!a.password&&e.jsx("span",{className:"text-xs text-red-500",children:"*Password must be atleast 8 character"})]}),e.jsx(m,{variant:"link",className:"",onClick:p,type:"button",disabled:h,children:"Forgot Password?"}),e.jsx(m,{className:"mt-4 font-semibold",type:"submit",disabled:j,children:"Login"}),e.jsx(m,{variant:"link",type:"button",onClick:()=>l("register"),children:"Don't have an Account?"}),e.jsxs(m,{onClick:o=>{o.stopPropagation();const w=window.location.hostname,S=window.location.protocol,q=8e3;window.location.href=`${S}//${w}:${q}/auth/google`},type:"button",className:"font-semibold",children:[e.jsx(k,{className:"ring-4 ring-white rounded-full bg-white"}),e.jsx("span",{children:"Login with Google account"})]})]})}function D({setFormType:l}){const[s,i]=d.useState({name:"",email:"",password:"",confirmPassword:""}),[a,r]=d.useState({email:!0,password:!0,confirmPassword:!0}),[n,x]=d.useState(!1),{signupFn:f,isPending:h}=I(),v=t=>{t.trim().length>=8?r({...a,password:!0}):r({...a,password:!1})},j=t=>{t.trim()===s.password.trim()?r({...a,confirmPassword:!0}):r({...a,confirmPassword:!1})};function N(t){r({...a,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)})}const b=t=>{t.preventDefault(),s.name!=""&&s.email.trim()!==""&&s.password.length>=8&&s.confirmPassword===s.password&&f(s)};return e.jsxs("form",{onSubmit:b,className:"bg-ls-bg-100 dark:bg-ls-bg-dark-800 flex flex-col max-w-2xl gap-4 p-4 py-4 border md:min-w-lg rounded-2xl shadow-2xl",style:{maxWidth:"calc(100% - 2rem)"},children:[e.jsx("h2",{className:"mb-2 text-3xl text-center",children:"Register New User"}),e.jsxs(g,{title:"Full Name field is required",htmlFor:"name",className:"grid",children:["Full Name *",e.jsx(u,{placeholder:"Enter Your Full Name",type:"text",value:s.name,name:"name",required:!0,className:"text-sm md:text-md",onChange:t=>{i({...s,name:t.target.value})}})]}),e.jsxs(g,{title:"Email field is required",htmlFor:"email",className:"grid",children:["Email *",e.jsx(u,{placeholder:"Enter Your Email",type:"email",autoComplete:"work email",value:s.email,name:"email",required:!0,className:"text-sm md:text-md",onChange:t=>{i({...s,email:t.target.value.trim()}),t.target.value.trim()!=""?N(t.target.value.trim()):r({...a,email:!0})}}),!a.email&&e.jsx("span",{className:"text-xs text-red-500",children:"*Not a valid Email"})]}),e.jsxs(g,{title:"Password field is required",htmlFor:"password",className:"grid",children:["Password *",e.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[e.jsx(u,{placeholder:"Enter Your Password",type:n?"text":"password",value:s.password,name:"password",autoComplete:"new-password",required:!0,className:"text-sm md:text-md",onChange:t=>{i({...s,password:t.target.value.trim()}),t.target.value.trim()!=""?v(t.target.value.trim()):r({...a,password:!0})}}),e.jsx(m,{onClick:()=>x(!n),type:"button",variant:"ghost",children:n?e.jsx(P,{}):e.jsx(y,{})})]}),!a.password&&e.jsx("span",{className:"text-xs text-red-500",children:"*Password must be atleast 8 character"})]}),e.jsxs(g,{title:"Confirm Password field is required",htmlFor:"confirmPassword",className:"grid",children:["Confirm Password *",e.jsxs("div",{className:"flex items-center justify-between w-full gap-1",children:[e.jsx(u,{placeholder:"Re-enter Your Password",type:n?"text":"password",autoComplete:"new-password",value:s.confirmPassword,name:"confirmPassword",required:!0,className:"text-sm md:text-md",onChange:t=>{i({...s,confirmPassword:t.target.value.trim()}),t.target.value.trim()!=""?j(t.target.value.trim()):r({...a,confirmPassword:!0})}}),e.jsx(m,{onClick:()=>x(!n),type:"button",variant:"ghost",children:n?e.jsx(P,{}):e.jsx(y,{})})]}),!a.confirmPassword&&e.jsx("span",{className:"text-xs text-red-500",children:"*Password must same as above"})]}),e.jsx(m,{className:"mt-4 font-semibold",disabled:h,type:"submit",children:"Register"}),e.jsx(m,{variant:"link",type:"button",onClick:()=>l("login"),children:"Already have an Account?"}),e.jsx(Y,{}),e.jsxs(m,{onClick:t=>{t.stopPropagation();const p=window.location.hostname,o=window.location.protocol,w=8e3;window.location.href=`${o}//${p}:${w}/auth/google`},type:"button",className:"font-semibold",children:[e.jsx(k,{className:"ring-4 ring-white rounded-full bg-white"}),e.jsx("span",{children:"Register with Google account"})]})]})}function O(){const[l,s]=d.useState("login");return e.jsxs("div",{className:"w-full px-4 flex flex-col h-auto min-h-screen bg-ls-bg-200 dark:bg-ls-bg-dark-900",children:[e.jsx(Z,{hide:{logo:!0,loginRegisterButton:!0}}),e.jsx($,{small:!0}),e.jsx("div",{className:"grid p-4 place-items-center w-full",children:l==="login"?e.jsx(V,{setFormType:s}):e.jsx(D,{setFormType:s})})]})}export{O as default};
