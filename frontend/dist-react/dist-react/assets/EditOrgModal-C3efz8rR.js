import{u as C,y as m,j as e}from"./index-DnKuSOU4.js";import{M as N}from"./Modal-D649pHtr.js";import{C as v,a as b,b as w,c as S,d as O}from"./card-B0iYxVm3.js";import{u as P,B as d}from"./button-DM0xGPaE.js";import{C as q}from"./Close-Dz7XJwfa.js";import{u as z,C as F}from"./index.esm-D2EKRQP0.js";import{L as t}from"./label-DzakG2sq.js";import{I as c}from"./input-1vTpJGqJ.js";import{S as L,a as D,b as M,c as B,d as E}from"./Select-DfFu5Nra.js";import{u as T}from"./apiOrg-Dj0q75R3.js";import"./dropdown-menu-DyjMlfXN.js";import"./index-z5a8x1m-.js";import"./Pagination-DfjvlYqY.js";const Q=["Basic","Small-Cap","Mid-Cap","Large-Cap","Other"];function Z({open:u,setOpen:n}){const r=C(),i=r.getQueryData(["user"])?.user.myOrg,{register:o,formState:p,handleSubmit:g,control:x}=z({defaultValues:i}),{errors:a}=p,{mutate:h,isPending:f}=P({mutationFn:T,onSuccess:()=>{r.invalidateQueries({queryKey:["user"]}),r.invalidateQueries({queryKey:["orgs"]}),m.success("Organization updated successfully",{className:"toast"})},onError:s=>{m.error(s.message,{className:"toast"})}}),j=s=>{i&&h({id:i?._id,data:s}),n(!1)};return e.jsx(N,{openModal:u,children:e.jsxs(v,{className:"min-w-md",children:[e.jsxs(b,{className:"flex justify-between items-center",children:[e.jsx(w,{children:"Create Organization"}),e.jsx(d,{onClick:()=>n(!1),variant:"secondary",children:e.jsx(q,{})})]}),e.jsx(S,{className:"grid gap-2",children:e.jsxs("form",{children:[e.jsxs(t,{title:"Previous Password field is required",htmlFor:"name",className:"grid gap-4 my-3",children:["Organization's Name",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(c,{placeholder:"Enter Your Organization's Name",type:"text",id:"name",...o("name",{required:"Please provide a name",minLength:{value:1,message:"Name is too short"},maxLength:{value:48,message:"Name is too long"}})})}),a?.name&&e.jsx("span",{className:"text-xs text-red-500",children:a?.name?.message})]}),e.jsxs(t,{title:"Previous Password field is required",htmlFor:"Description",className:"grid gap-4",children:["Organization's Description",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(c,{placeholder:"Enter a brief description ",type:"text",id:"Description",...o("description",{required:"Please provide a description of your organization",minLength:{value:8,message:"Description is too short"},maxLength:{value:300,message:"Description is too long"}})})}),a?.description&&e.jsx("span",{className:"text-xs text-red-500",children:a?.description?.message})]}),e.jsxs(t,{title:"Previous Password field is required",htmlFor:"Type",className:"grid gap-4 mt-3",children:["Type",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(F,{name:"type",control:x,render:({field:s})=>e.jsxs(L,{onValueChange:s.onChange,value:s.value,children:[e.jsx(D,{className:"w-[180px]",children:e.jsx(M,{placeholder:"Basic",defaultValue:"Basic"})}),e.jsx(B,{children:Q.map((l,y)=>e.jsx(E,{value:l,children:l},y))})]})})})]})]})}),e.jsx(O,{children:e.jsx(d,{className:"w-full",type:"submit",onClick:g(j),disabled:f,children:"Submit"})})]})})}export{Z as default};
