import{j as e,u as b,y as j,r as u,e as S,g as M,c as v,L as f}from"./index-M_t2dwz2.js";import{M as P}from"./Modal-Crn6lQ0e.js";import{C as k,a as N,b as C,c as y,d as z}from"./card-kPvTOTaO.js";import{u as B,B as t,d as F,S as q,b as D,L as V,M as E}from"./button-DC7jl_rC.js";import{C as T}from"./Close-CcNr5Ub_.js";import{u as H,C as I}from"./index.esm-C-VcNflK.js";import{L as x}from"./label-Ck7i0l0-.js";import{I as w}from"./input-CsKVG5ey.js";import{S as Q,a as W,b as A,c as G,d as Y}from"./Select-e8gsW7U0.js";import{c as $}from"./apiOrg-DcexOA6k.js";import{N as J}from"./Navbar-DZo0C7Qx.js";import{B as K}from"./badge-C18dQvGD.js";import{u as R}from"./useGetOrganizations-jaHWIxtS.js";import"./dropdown-menu-BmGO1OqQ.js";import"./index-CAakJiDn.js";import"./Pagination-BysFX9UX.js";import"./UserAvatar-BeKrMOcN.js";function _(s){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...s,children:e.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 12h14m-7-7v14"})})}function U(s){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...s,children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[e.jsx("path",{d:"M12 3v18m-9-9h18"}),e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})]})})}function X(s){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...s,children:e.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5h.01M3 12h.01M3 19h.01M8 5h13M8 12h13M8 19h13"})})}const Z=["Basic","Small-Cap","Mid-Cap","Large-Cap","Other"];function ee({open:s,setOpen:r}){const{register:a,handleSubmit:l,formState:c,control:h,reset:g}=H(),{errors:i}=c,o=b(),{mutate:m,isPending:d}=B({mutationFn:$,onSuccess:()=>{o.invalidateQueries({queryKey:["orgs"]}),j.success("Organization created successfully",{className:"toast"})},onError:n=>{j.error(n.message,{className:"toast"})},onSettled:()=>{g()}}),O=n=>{m(n),r(!1)};return e.jsx(P,{openModal:s,children:e.jsxs(k,{className:"min-w-md",children:[e.jsxs(N,{className:"flex justify-between items-center",children:[e.jsx(C,{children:"Create Organization"}),e.jsx(t,{onClick:()=>r(!1),variant:"secondary",children:e.jsx(T,{})})]}),e.jsx(y,{className:"grid gap-2",children:e.jsxs("form",{children:[e.jsxs(x,{title:"Previous Password field is required",htmlFor:"name",className:"grid gap-4 my-3",children:["Organization's Name",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(w,{placeholder:"Enter Your Organization's Name",type:"text",id:"name",...a("name",{required:"Please provide a name",minLength:{value:1,message:"Name is too short"},maxLength:{value:48,message:"Name is too long"}})})}),i?.name&&e.jsx("span",{className:"text-xs text-red-500",children:i?.name?.message})]}),e.jsxs(x,{title:"Previous Password field is required",htmlFor:"Description",className:"grid gap-4",children:["Organization's Description",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(w,{placeholder:"Enter a brief description ",type:"text",id:"Description",...a("description",{required:"Please provide a description of your organization",minLength:{value:8,message:"Description is too short"},maxLength:{value:300,message:"Description is too long"}})})}),i?.description&&e.jsx("span",{className:"text-xs text-red-500",children:i?.description?.message})]}),e.jsxs(x,{title:"Previous Password field is required",htmlFor:"Type",className:"grid gap-4 mt-3 w-full",children:["Type",e.jsx("div",{className:"flex items-center justify-between w-full gap-1",children:e.jsx(I,{name:"type",control:h,render:({field:n})=>e.jsxs(Q,{onValueChange:n.onChange,value:n.value,children:[e.jsx(W,{className:"w-full",children:e.jsx(A,{placeholder:"Basic",defaultValue:"Basic"})}),e.jsx(G,{children:Z.map((p,L)=>e.jsx(Y,{value:p,children:p},L))})]})})})]})]})}),e.jsx(z,{children:e.jsx(t,{className:"w-full",type:"submit",onClick:l(O),disabled:d,children:"Submit"})})]})})}function se(s){switch(s){case"Owner":return"text-black bg-yellow-400 dark:text-black dark:bg-yellow-400";case"Admin":return"text-black bg-violet-400 dark:text-black dark:bg-violet-400";case"Manager":return"text-black bg-green-400 dark:text-black dark:bg-green-400";case"Staff":return"text-white bg-zinc-800 dark:text-black dark:bg-zinc-200";default:return"text-black bg-zinc-300 outline-1 dark:text-white dark:bg-zinc-800 "}}function re({org:s,view:r}){return e.jsxs(k,{className:"bg-ls-bg-300 dark:bg-ls-bg-dark-800 hover:border-zinc-500 transition-colors duration-100",children:[e.jsxs(N,{className:"flex items-center",children:[e.jsx(C,{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx(V,{children:s.name})}),e.jsx(K,{className:v(se(""),"font-semibold shadow-md ml-auto"),children:s.role}),r==="list"&&e.jsx(t,{asChild:!0,variant:"link",children:e.jsx(f,{to:`/dashboard/${s?.slug}`,children:"View Organization"})})]}),e.jsx(y,{children:e.jsx(E,{className:"line-clamp-2",children:s.description})}),r==="grid"&&e.jsx(z,{className:"flex justify-end",children:e.jsx(t,{asChild:!0,children:e.jsx(f,{to:`/dashboard/${s?.slug}`,children:"View Organization"})})})]})}function be(){const[s,r]=u.useState(!1),[a,l]=u.useState("grid"),c=S(),i=b().getQueryData(["user"])?.user,{data:o,isPending:m}=R();return i||c("/"),m?e.jsx(M,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex flex-col gap-3 min-h-dvh bg-ls-bg-200 dark:bg-ls-bg-dark-900 relative",children:[e.jsx(J,{}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center king-julian md:px-4 gap-2 px-2",children:[e.jsx(F,{children:"Organizations"}),e.jsxs("div",{className:"flex gap-2 justify-between w-full sm:w-fit sm:justify-center",children:[e.jsxs("div",{className:"flex",children:[e.jsx(t,{variant:a==="grid"?"default":"outline",className:"ml-auto rounded-r-none",onClick:()=>l("grid"),title:"grid view",children:e.jsx(U,{})}),e.jsx(t,{variant:a==="list"?"default":"outline",className:"rounded-l-none",onClick:()=>l("list"),title:"list view",children:e.jsx(X,{})})]}),e.jsxs(t,{size:"lg",className:"top-10 right-20 w-fit",onClick:()=>r(!0),children:[e.jsx(q,{children:"Add new Org"}),e.jsx(_,{})]})]})]}),e.jsx("div",{className:v("min-h-96 m-4 items-baseline outline-1 p-4 rounded-2xl grid gap-2 ",a==="grid"?"grid-cols-[repeat(auto-fit,minmax(320px,1fr))]":""),children:o.length===0?e.jsxs("div",{className:"h-full w-full flex flex-col justify-center items-center gap-3",children:[e.jsx(D,{children:"You are not in any organizations."}),e.jsx(t,{onClick:()=>r(!0),children:"Create/Join a Organization"})]}):o.map(d=>e.jsx(re,{org:d,view:a},d._id))}),e.jsx(u.Suspense,{children:e.jsx(ee,{open:s,setOpen:r})})]})})}export{be as default};
