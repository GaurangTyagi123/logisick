import{u,e as d,y as i,b as l,f as m,r as g,j as s,g as f}from"./index-DLpN21qu.js";import{B as p}from"./BigHeading-RgsTEVaQ.js";import{u as v,B as x,b as h}from"./button-DdnwTV88.js";import{b}from"./apiEmp-BefEmMOz.js";function j(){const a=u(),n=d(),{mutate:r,isPending:t}=v({mutationFn:({token:e})=>b(e),onSuccess:e=>{a.invalidateQueries({predicate:c=>c.queryKey[0]?.toString()==="emps"}),i.success("Invite Accepted",{className:"toast"}),n("/dashboard")},onError:e=>{i.error(e.message,{className:"toast"})}});return{acceptInvitation:r,isPending:t}}function y(){const{token:a}=l(),{acceptInvitation:n,isPending:r}=j(),{user:t,isPending:e}=m(),c=()=>{a?n({token:a}):i.error("No invitation token found",{className:"toast"})};return g.useEffect(()=>{let o;return t||(o=i.error("Login/Register first to accept invitatation",{className:"toast"})),()=>i.dismiss(o)},[t]),e?s.jsx(f,{fullscreen:!0}):s.jsxs("div",{className:"h-dvh bg-ls-bg-300 dark:bg-ls-bg-dark-800 flex flex-col justify-center items-center",children:[s.jsx(p,{center:!0}),s.jsx("div",{className:"max-w-lg p-2 grid",children:t?s.jsx(x,{disabled:r||!t,onClick:c,children:"Accept Invitation"}):s.jsx(h,{children:"Login/Register first to accept invitatation"})})]})}export{y as default};
