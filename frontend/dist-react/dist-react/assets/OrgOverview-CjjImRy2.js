import{r,j as e,y as C,b as R,a as A,L as G}from"./index-M_t2dwz2.js";import{u as I}from"./useGetEmployees--ZWjsiSo.js";import{u as M,b as g,S as j,M as O,B}from"./button-DC7jl_rC.js";import{s as T,g as z}from"./apiOrg-DcexOA6k.js";import{U as Z}from"./UserAvatar-BeKrMOcN.js";import{l as q,C as y,a as F,S as i}from"./CustomTableSkeleton-CzVo7US3.js";import{B as b}from"./badge-C18dQvGD.js";import{f as w}from"./utilfn-b8q2FJcK.js";import"./card-kPvTOTaO.js";import"./dropdown-menu-BmGO1OqQ.js";import"./input-CsKVG5ey.js";import"./table-B4Omkj6h.js";import"./Pagination-BysFX9UX.js";function N(a){return a?.map(s=>({role:s?.data?.role,...s?.data?.employees}))||[]}function L({orgid:a}){const[n,E]=r.useState(1),[u,S]=r.useState(1),{data:v,count:c,isPending:m,error:f}=I(a,u),[x,k]=r.useState(null),{mutate:p}=M({mutationFn:T,onSettled:t=>{if(t)k(N(t.employees.map(l=>({data:l}))));else return}}),o=r.useRef(null),h=r.useCallback(async t=>{o.current&&o.current.abort();const l=new AbortController;o.current=l,t.length&&p({orgid:a,query:t.trim(),controller:l})},[a,p]),d=r.useMemo(()=>q.debounce(h,500),[h]);if(r.useEffect(()=>{m||E(c>5?Math.ceil(c/5):1)},[c,m]),r.useEffect(()=>()=>{d.cancel(),o.current?.abort()},[d]),m)return e.jsx(y,{});if(f){C.error(f.message,{className:"toast"});return}const P=N(v);return e.jsx("div",{className:"w-full",children:e.jsx(F,{title:"Employees",columns:[{key:"name",header:"Name",render:(t,l)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Z,{className:"w-10 h-10",customSeed:l.avatar}),e.jsx("span",{className:"hidden sm:flex",children:l?.name})]})},{key:"email",header:"Email"},{key:"role",header:"Role"}],clientSide:!0,data:x||P,currentPage:u,totalPages:n,setPage:S,onSearch:d})})}function se(){const{orgSlug:a}=R(),{data:s,isPending:n}=A({queryKey:[`org-${a}`],queryFn:()=>z(a)});return n?e.jsxs("div",{className:"flex flex-col gap-2  items-baseline h-full w-autorounded-2xl bg-ls-bg-300 dark:bg-ls-bg-dark-800",children:[e.jsxs("div",{className:"bg-white dark:bg-ls-bg-dark-800 outline-1 w-full p-3 rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center w-full",children:[e.jsx(i,{className:"w-1/3 h-10"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{className:"h-18 w-18"}),e.jsx(i,{className:"h-18 w-18"})]})]}),e.jsx(i,{className:"w-1/2 h-5"})]}),e.jsx(y,{})]}):s?e.jsxs("div",{className:"flex flex-col gap-2 items-baseline h-full w-auto jet-brains rounded-2xl bg-ls-bg-300 dark:bg-ls-bg-dark-800",children:[e.jsxs("div",{className:"bg-white dark:bg-ls-bg-dark-800 outline-1 w-full p-3 rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center w-full",children:[e.jsx(g,{className:"overflow-hidden text-ellipsis whitespace-nowrap w-full",children:s.name}),e.jsxs("div",{className:"flex",children:[e.jsxs(j,{className:"grid place-items-center gap-2 h-full p-2",children:["Imports",e.jsx(b,{className:"p-2",children:w(5e5,"INR")})]}),e.jsxs(j,{className:"grid place-items-center gap-2 h-full p-2",children:["Exports",e.jsx(b,{className:"p-2",children:w(5e5,"INR")})]})]})]}),e.jsx(O,{className:"overflow-hidden text-ellipsis whitespace-nowrap line-clamp-2",children:s.description})]}),s?e.jsx(L,{orgid:s?._id}):e.jsxs("div",{className:"h-96 w-full flex flex-col justify-center items-center gap-3 outline-1",children:[e.jsx(g,{children:"Your Organization doesn't have any employees"}),e.jsx(B,{asChild:!0,children:e.jsx(G,{to:"user-role",children:"Add Employees"})})]})]}):e.jsx("p",{children:"Create your own organiztion"})}export{se as default};
